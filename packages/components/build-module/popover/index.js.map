{"version":3,"sources":["/Users/ky/Sites/valet/copesacontent/web/app/plugins/gutenberg/packages/components/src/popover/index.js"],"names":["classnames","Component","createRef","focus","ESCAPE","computePopoverPosition","withFocusReturn","withConstrainedTabbing","PopoverDetectOutside","IconButton","ScrollLock","Slot","Fill","Consumer","FocusManaged","children","SLOT_NAME","Popover","arguments","bind","refresh","getAnchorRect","updatePopoverSize","throttledComputePopoverPosition","maybeClose","contentNode","anchorNode","state","popoverLeft","popoverTop","yAxis","xAxis","contentHeight","contentWidth","isMobile","popoverSize","toggleWindowEvents","focusTimeout","setTimeout","prevProps","position","props","clearTimeout","isListening","handler","window","cancelAnimationFrame","rafHandle","event","type","current","contains","target","requestAnimationFrame","focusOnMount","firstTabbable","tabbable","find","anchor","parentNode","rect","getBoundingClientRect","getComputedStyle","paddingTop","paddingBottom","topPad","parseInt","bottomPad","x","left","y","top","width","height","right","bottom","setState","expandOnMobile","newPopoverPosition","onKeyDown","onClose","keyCode","stopPropagation","headerTitle","className","onClickOutside","noArrow","range","contentProps","classes","content","undefined","visibility","maxHeight","maxWidth","getSlot","defaultProps","PopoverContainer"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { Component, createRef } from '@wordpress/element';\nimport { focus } from '@wordpress/dom';\nimport { ESCAPE } from '@wordpress/keycodes';\n\n/**\n * Internal dependencies\n */\nimport { computePopoverPosition } from './utils';\nimport withFocusReturn from '../higher-order/with-focus-return';\nimport withConstrainedTabbing from '../higher-order/with-constrained-tabbing';\nimport PopoverDetectOutside from './detect-outside';\nimport IconButton from '../icon-button';\nimport ScrollLock from '../scroll-lock';\nimport { Slot, Fill, Consumer } from '../slot-fill';\n\nconst FocusManaged = withConstrainedTabbing( withFocusReturn( ( { children } ) => children ) );\n\n/**\n * Name of slot in which popover should fill.\n *\n * @type {String}\n */\nconst SLOT_NAME = 'Popover';\n\nclass Popover extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\n\t\tthis.focus = this.focus.bind( this );\n\t\tthis.refresh = this.refresh.bind( this );\n\t\tthis.getAnchorRect = this.getAnchorRect.bind( this );\n\t\tthis.updatePopoverSize = this.updatePopoverSize.bind( this );\n\t\tthis.computePopoverPosition = this.computePopoverPosition.bind( this );\n\t\tthis.throttledComputePopoverPosition = this.throttledComputePopoverPosition.bind( this );\n\t\tthis.maybeClose = this.maybeClose.bind( this );\n\n\t\tthis.contentNode = createRef();\n\t\tthis.anchorNode = createRef();\n\n\t\tthis.state = {\n\t\t\tpopoverLeft: null,\n\t\t\tpopoverTop: null,\n\t\t\tyAxis: 'top',\n\t\t\txAxis: 'center',\n\t\t\tcontentHeight: null,\n\t\t\tcontentWidth: null,\n\t\t\tisMobile: false,\n\t\t\tpopoverSize: null,\n\t\t};\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.toggleWindowEvents( true );\n\t\tthis.refresh();\n\n\t\t/*\n\t\t * Without the setTimeout, the dom node is not being focused. Related:\n\t\t * https://stackoverflow.com/questions/35522220/react-ref-with-focus-doesnt-work-without-settimeout-my-example\n\t\t *\n\t\t * TODO: Treat the cause, not the symptom.\n\t\t */\n\t\tthis.focusTimeout = setTimeout( () => {\n\t\t\tthis.focus();\n\t\t}, 0 );\n\t}\n\n\tcomponentDidUpdate( prevProps ) {\n\t\tif ( prevProps.position !== this.props.position ) {\n\t\t\tthis.computePopoverPosition();\n\t\t}\n\t}\n\n\tcomponentWillUnmount() {\n\t\tthis.toggleWindowEvents( false );\n\n\t\tclearTimeout( this.focusTimeout );\n\t}\n\n\ttoggleWindowEvents( isListening ) {\n\t\tconst handler = isListening ? 'addEventListener' : 'removeEventListener';\n\n\t\twindow.cancelAnimationFrame( this.rafHandle );\n\t\twindow[ handler ]( 'resize', this.throttledComputePopoverPosition );\n\t\twindow[ handler ]( 'scroll', this.throttledComputePopoverPosition, true );\n\t}\n\n\tthrottledComputePopoverPosition( event ) {\n\t\tif ( event.type === 'scroll' && this.contentNode.current.contains( event.target ) ) {\n\t\t\treturn;\n\t\t}\n\t\tthis.rafHandle = window.requestAnimationFrame( () => this.computePopoverPosition() );\n\t}\n\n\t/**\n\t * Calling `refresh()` will force the Popover to recalculate its size and\n\t * position. This is useful when a DOM change causes the anchor node to change\n\t * position.\n\t *\n\t * @return {void}\n\t */\n\trefresh() {\n\t\tconst popoverSize = this.updatePopoverSize();\n\t\tthis.computePopoverPosition( popoverSize );\n\t}\n\n\tfocus() {\n\t\tconst { focusOnMount } = this.props;\n\n\t\tif ( ! focusOnMount || ! this.contentNode.current ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( focusOnMount === 'firstElement' ) {\n\t\t\t// Find first tabbable node within content and shift focus, falling\n\t\t\t// back to the popover panel itself.\n\t\t\tconst firstTabbable = focus.tabbable.find( this.contentNode.current )[ 0 ];\n\n\t\t\tif ( firstTabbable ) {\n\t\t\t\tfirstTabbable.focus();\n\t\t\t} else {\n\t\t\t\tthis.contentNode.current.focus();\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\tif ( focusOnMount === 'container' ) {\n\t\t\t// Focus the popover panel itself so items in the popover are easily\n\t\t\t// accessed via keyboard navigation.\n\t\t\tthis.contentNode.current.focus();\n\t\t}\n\t}\n\n\tgetAnchorRect( anchor ) {\n\t\tif ( ! anchor || ! anchor.parentNode ) {\n\t\t\treturn;\n\t\t}\n\t\tconst rect = anchor.parentNode.getBoundingClientRect();\n\t\t// subtract padding\n\t\tconst { paddingTop, paddingBottom } = window.getComputedStyle( anchor.parentNode );\n\t\tconst topPad = parseInt( paddingTop, 10 );\n\t\tconst bottomPad = parseInt( paddingBottom, 10 );\n\t\treturn {\n\t\t\tx: rect.left,\n\t\t\ty: rect.top + topPad,\n\t\t\twidth: rect.width,\n\t\t\theight: rect.height - topPad - bottomPad,\n\t\t\tleft: rect.left,\n\t\t\tright: rect.right,\n\t\t\ttop: rect.top + topPad,\n\t\t\tbottom: rect.bottom - bottomPad,\n\t\t};\n\t}\n\n\tupdatePopoverSize() {\n\t\tconst rect = this.contentNode.current.getBoundingClientRect();\n\t\tif (\n\t\t\t! this.state.popoverSize ||\n\t\t\trect.width !== this.state.popoverSize.width ||\n\t\t\trect.height !== this.state.popoverSize.height\n\t\t) {\n\t\t\tconst popoverSize = {\n\t\t\t\theight: rect.height,\n\t\t\t\twidth: rect.width,\n\t\t\t};\n\t\t\tthis.setState( { popoverSize } );\n\t\t\treturn popoverSize;\n\t\t}\n\t\treturn this.state.popoverSize;\n\t}\n\n\tcomputePopoverPosition( popoverSize ) {\n\t\tconst { getAnchorRect = this.getAnchorRect, position = 'top', expandOnMobile } = this.props;\n\t\tconst newPopoverPosition = computePopoverPosition(\n\t\t\tgetAnchorRect( this.anchorNode.current ),\n\t\t\tpopoverSize || this.state.popoverSize,\n\t\t\tposition,\n\t\t\texpandOnMobile\n\t\t);\n\n\t\tif (\n\t\t\tthis.state.yAxis !== newPopoverPosition.yAxis ||\n\t\t\tthis.state.xAxis !== newPopoverPosition.xAxis ||\n\t\t\tthis.state.popoverLeft !== newPopoverPosition.popoverLeft ||\n\t\t\tthis.state.popoverTop !== newPopoverPosition.popoverTop ||\n\t\t\tthis.state.contentHeight !== newPopoverPosition.contentHeight ||\n\t\t\tthis.state.contentWidth !== newPopoverPosition.contentWidth ||\n\t\t\tthis.state.isMobile !== newPopoverPosition.isMobile\n\t\t) {\n\t\t\tthis.setState( newPopoverPosition );\n\t\t}\n\t}\n\n\tmaybeClose( event ) {\n\t\tconst { onKeyDown, onClose } = this.props;\n\n\t\t// Close on escape\n\t\tif ( event.keyCode === ESCAPE && onClose ) {\n\t\t\tevent.stopPropagation();\n\t\t\tonClose();\n\t\t}\n\n\t\t// Preserve original content prop behavior\n\t\tif ( onKeyDown ) {\n\t\t\tonKeyDown( event );\n\t\t}\n\t}\n\n\trender() {\n\t\tconst {\n\t\t\theaderTitle,\n\t\t\tonClose,\n\t\t\tchildren,\n\t\t\tclassName,\n\t\t\tonClickOutside = onClose,\n\t\t\tnoArrow,\n\t\t\t// Disable reason: We generate the `...contentProps` rest as remainder\n\t\t\t// of props which aren't explicitly handled by this component.\n\t\t\t/* eslint-disable no-unused-vars */\n\t\t\tposition,\n\t\t\trange,\n\t\t\tfocusOnMount,\n\t\t\tgetAnchorRect,\n\t\t\texpandOnMobile,\n\t\t\t/* eslint-enable no-unused-vars */\n\t\t\t...contentProps\n\t\t} = this.props;\n\t\tconst {\n\t\t\tpopoverLeft,\n\t\t\tpopoverTop,\n\t\t\tyAxis,\n\t\t\txAxis,\n\t\t\tcontentHeight,\n\t\t\tcontentWidth,\n\t\t\tpopoverSize,\n\t\t\tisMobile,\n\t\t} = this.state;\n\n\t\tconst classes = classnames(\n\t\t\t'components-popover',\n\t\t\tclassName,\n\t\t\t'is-' + yAxis,\n\t\t\t'is-' + xAxis,\n\t\t\t{\n\t\t\t\t'is-mobile': isMobile,\n\t\t\t\t'is-without-arrow': noArrow || ( xAxis === 'center' && yAxis === 'middle' ),\n\t\t\t}\n\t\t);\n\n\t\t// Disable reason: We care to capture the _bubbled_ events from inputs\n\t\t// within popover as inferring close intent.\n\n\t\t/* eslint-disable jsx-a11y/no-static-element-interactions */\n\t\tlet content = (\n\t\t\t<PopoverDetectOutside onClickOutside={ onClickOutside }>\n\t\t\t\t<div\n\t\t\t\t\tclassName={ classes }\n\t\t\t\t\tstyle={ {\n\t\t\t\t\t\ttop: ! isMobile && popoverTop ? popoverTop + 'px' : undefined,\n\t\t\t\t\t\tleft: ! isMobile && popoverLeft ? popoverLeft + 'px' : undefined,\n\t\t\t\t\t\tvisibility: popoverSize ? undefined : 'hidden',\n\t\t\t\t\t} }\n\t\t\t\t\t{ ...contentProps }\n\t\t\t\t\tonKeyDown={ this.maybeClose }\n\t\t\t\t>\n\t\t\t\t\t{ isMobile && (\n\t\t\t\t\t\t<div className=\"components-popover__header\">\n\t\t\t\t\t\t\t<span className=\"components-popover__header-title\">\n\t\t\t\t\t\t\t\t{ headerTitle }\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<IconButton className=\"components-popover__close\" icon=\"no-alt\" onClick={ onClose } />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) }\n\t\t\t\t\t<div\n\t\t\t\t\t\tref={ this.contentNode }\n\t\t\t\t\t\tclassName=\"components-popover__content\"\n\t\t\t\t\t\tstyle={ {\n\t\t\t\t\t\t\tmaxHeight: ! isMobile && contentHeight ? contentHeight + 'px' : undefined,\n\t\t\t\t\t\t\tmaxWidth: ! isMobile && contentWidth ? contentWidth + 'px' : undefined,\n\t\t\t\t\t\t} }\n\t\t\t\t\t\ttabIndex=\"-1\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{ children }\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</PopoverDetectOutside>\n\t\t);\n\t\t/* eslint-enable jsx-a11y/no-static-element-interactions */\n\n\t\t// Apply focus to element as long as focusOnMount is truthy; false is\n\t\t// the only \"disabled\" value.\n\t\tif ( focusOnMount ) {\n\t\t\tcontent = <FocusManaged>{ content }</FocusManaged>;\n\t\t}\n\n\t\treturn (\n\t\t\t<Consumer>\n\t\t\t\t{ ( { getSlot } ) => {\n\t\t\t\t\t// In case there is no slot context in which to render,\n\t\t\t\t\t// default to an in-place rendering.\n\t\t\t\t\tif ( getSlot && getSlot( SLOT_NAME ) ) {\n\t\t\t\t\t\tcontent = <Fill name={ SLOT_NAME }>{ content }</Fill>;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<span ref={ this.anchorNode }>\n\t\t\t\t\t\t\t{ content }\n\t\t\t\t\t\t\t{ isMobile && expandOnMobile && <ScrollLock /> }\n\t\t\t\t\t\t</span>\n\t\t\t\t\t);\n\t\t\t\t} }\n\t\t\t</Consumer>\n\t\t);\n\t}\n}\n\nPopover.defaultProps = {\n\tfocusOnMount: 'firstElement',\n\tnoArrow: false,\n};\n\nconst PopoverContainer = Popover;\n\nPopoverContainer.Slot = () => <Slot bubblesVirtually name={ SLOT_NAME } />;\n\nexport default PopoverContainer;\n"]}