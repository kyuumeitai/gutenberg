{"version":3,"sources":["/Users/ky/Sites/valet/copesacontent/web/app/plugins/gutenberg/packages/editor/src/components/rich-text/format-edit.js"],"names":["normalizeIconObject","withSelect","Component","Fragment","getActiveFormat","Fill","KeyboardShortcuts","ToolbarButton","rawShortcut","displayShortcut","InserterListItem","normalizeTerm","isResult","filterValue","title","keywords","normalizedSearchTerm","matchSearch","string","indexOf","some","FillToolbarButton","name","shortcutType","shortcutCharacter","props","shortcut","fillName","FillInserterListItem","icon","Shortcut","arguments","onUse","bind","character","type","FormatEdit","formatTypes","onChange","value","map","Edit","edit","activeFormat","isActive","undefined","activeAttributes","attributes","select","getFormatTypes"],"mappings":"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","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { normalizeIconObject } from '@wordpress/blocks';\nimport { withSelect } from '@wordpress/data';\nimport { Component, Fragment } from '@wordpress/element';\nimport { getActiveFormat } from '@wordpress/rich-text';\nimport { Fill, KeyboardShortcuts, ToolbarButton } from '@wordpress/components';\nimport { rawShortcut, displayShortcut } from '@wordpress/keycodes';\n\n/**\n * Internal dependencies\n */\nimport InserterListItem from '../inserter-list-item';\nimport { normalizeTerm } from '../inserter/menu';\n\nfunction isResult( { title, keywords = [] }, filterValue ) {\n\tconst normalizedSearchTerm = normalizeTerm( filterValue );\n\tconst matchSearch = ( string ) => normalizeTerm( string ).indexOf( normalizedSearchTerm ) !== -1;\n\treturn matchSearch( title ) || keywords.some( matchSearch );\n}\n\nfunction FillToolbarButton( { name, shortcutType, shortcutCharacter, ...props } ) {\n\tlet shortcut;\n\tlet fillName = 'RichText.ToolbarControls';\n\n\tif ( name ) {\n\t\tfillName += `.${ name }`;\n\t}\n\n\tif ( shortcutType && shortcutCharacter ) {\n\t\tshortcut = displayShortcut[ shortcutType ]( shortcutCharacter );\n\t}\n\n\treturn (\n\t\t<Fill name={ fillName }>\n\t\t\t<ToolbarButton\n\t\t\t\t{ ...props }\n\t\t\t\tshortcut={ shortcut }\n\t\t\t/>\n\t\t</Fill>\n\t);\n}\n\nfunction FillInserterListItem( props ) {\n\treturn (\n\t\t<Fill name=\"Inserter.InlineElements\">\n\t\t\t{ ( { filterValue } ) => {\n\t\t\t\tif ( filterValue && ! isResult( props, filterValue ) ) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\treturn <InserterListItem { ...props } icon={ normalizeIconObject( props.icon ) } />;\n\t\t\t} }\n\t\t</Fill>\n\t);\n}\n\nclass Shortcut extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\n\t\tthis.onUse = this.onUse.bind( this );\n\t}\n\n\tonUse() {\n\t\tthis.props.onUse();\n\t\treturn false;\n\t}\n\n\trender() {\n\t\tconst { character, type } = this.props;\n\n\t\treturn (\n\t\t\t<KeyboardShortcuts\n\t\t\t\tbindGlobal\n\t\t\t\tshortcuts={ {\n\t\t\t\t\t[ rawShortcut[ type ]( character ) ]: this.onUse,\n\t\t\t\t} }\n\t\t\t/>\n\t\t);\n\t}\n}\n\nconst FormatEdit = ( { formatTypes, onChange, value } ) => {\n\treturn (\n\t\t<Fragment>\n\t\t\t{ formatTypes.map( ( { name, edit: Edit, keywords } ) => {\n\t\t\t\tif ( ! Edit ) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\tconst activeFormat = getActiveFormat( value, name );\n\t\t\t\tconst isActive = activeFormat !== undefined;\n\t\t\t\tconst activeAttributes = isActive ? activeFormat.attributes || {} : {};\n\n\t\t\t\treturn (\n\t\t\t\t\t<Edit\n\t\t\t\t\t\tkey={ name }\n\t\t\t\t\t\tisActive={ isActive }\n\t\t\t\t\t\tactiveAttributes={ activeAttributes }\n\t\t\t\t\t\tvalue={ value }\n\t\t\t\t\t\tonChange={ onChange }\n\t\t\t\t\t\tToolbarButton={ FillToolbarButton }\n\t\t\t\t\t\tInserterListItem={ ( props ) =>\n\t\t\t\t\t\t\t<FillInserterListItem\n\t\t\t\t\t\t\t\tkeywords={ keywords }\n\t\t\t\t\t\t\t\t{ ...props }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t}\n\t\t\t\t\t\tShortcut={ Shortcut }\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t} ) }\n\t\t</Fragment>\n\t);\n};\n\nexport default withSelect(\n\t( select ) => {\n\t\tconst { getFormatTypes } = select( 'core/rich-text' );\n\n\t\treturn {\n\t\t\tformatTypes: getFormatTypes(),\n\t\t};\n\t}\n)( FormatEdit );\n"]}