{"version":3,"sources":["/Users/ky/Sites/valet/copesacontent/web/app/plugins/gutenberg/packages/block-library/src/gallery/index.js"],"names":["filter","every","__","createBlock","RichText","mediaUpload","createBlobURL","G","Path","SVG","default","edit","defaultColumnsNumber","pickRelevantMediaFiles","blockAttributes","images","type","query","url","source","selector","attribute","link","alt","id","caption","columns","imageCrop","linkTo","deprecatedBlockAttributes","save","attributes","map","image","href","img","length","name","settings","title","description","icon","category","keywords","supports","align","transforms","from","isMultiBlock","blocks","transform","validImages","tag","shortcode","ids","named","split","parseInt","isMatch","files","file","indexOf","onChange","block","filesList","onFileChange","clientId","allowedTypes","to","deprecated"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { filter, every } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { createBlock } from '@wordpress/blocks';\nimport { RichText, mediaUpload } from '@wordpress/editor';\nimport { createBlobURL } from '@wordpress/blob';\nimport { G, Path, SVG } from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport { default as edit, defaultColumnsNumber, pickRelevantMediaFiles } from './edit';\n\n// Attributes are to be saved as JSON in the block boundary for easier\n// server-side access.\nconst blockAttributes = {\n\timages: {\n\t\ttype: 'array',\n\t\tdefault: [],\n\t\tquery: {\n\t\t\turl: {\n\t\t\t\tsource: 'attribute',\n\t\t\t\tselector: 'img',\n\t\t\t\tattribute: 'src',\n\t\t\t},\n\t\t\tlink: {\n\t\t\t\tsource: 'attribute',\n\t\t\t\tselector: 'img',\n\t\t\t\tattribute: 'data-link',\n\t\t\t},\n\t\t\talt: {\n\t\t\t\tsource: 'attribute',\n\t\t\t\tselector: 'img',\n\t\t\t\tattribute: 'alt',\n\t\t\t\tdefault: '',\n\t\t\t},\n\t\t\tid: {\n\t\t\t\tsource: 'attribute',\n\t\t\t\tselector: 'img',\n\t\t\t\tattribute: 'data-id',\n\t\t\t},\n\t\t\tcaption: {\n\t\t\t\ttype: 'string',\n\t\t\t\tsource: 'html',\n\t\t\t\tselector: 'figcaption',\n\t\t\t},\n\t\t},\n\t},\n\tcolumns: {\n\t\ttype: 'number',\n\t},\n\timageCrop: {\n\t\ttype: 'boolean',\n\t\tdefault: true,\n\t},\n\tlinkTo: {\n\t\ttype: 'string',\n\t\tdefault: 'none',\n\t},\n};\n\n// Identical schema, but wherein `images` are not saved in the block boundary,\n// and instead are sourced in the block's inner HTML.\nconst deprecatedBlockAttributes = {\n\t...blockAttributes,\n\timages: {\n\t\t...blockAttributes.images,\n\t\tsource: 'query',\n\t\tselector: 'ul.wp-block-gallery .blocks-gallery-item',\n\t},\n};\n\nfunction save( { attributes } ) {\n\tconst { images, columns = defaultColumnsNumber( attributes ), imageCrop, linkTo } = attributes;\n\treturn (\n\t\t<ul className={ `columns-${ columns } ${ imageCrop ? 'is-cropped' : '' }` } >\n\t\t\t{ images.map( ( image ) => {\n\t\t\t\tlet href;\n\n\t\t\t\tswitch ( linkTo ) {\n\t\t\t\t\tcase 'media':\n\t\t\t\t\t\thref = image.url;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'attachment':\n\t\t\t\t\t\thref = image.link;\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tconst img = <img src={ image.url } alt={ image.alt } data-id={ image.id } data-link={ image.link } className={ image.id ? `wp-image-${ image.id }` : null } />;\n\n\t\t\t\treturn (\n\t\t\t\t\t<li key={ image.id || image.url } className=\"blocks-gallery-item\">\n\t\t\t\t\t\t<figure>\n\t\t\t\t\t\t\t{ href ? <a href={ href }>{ img }</a> : img }\n\t\t\t\t\t\t\t{ image.caption && image.caption.length > 0 && (\n\t\t\t\t\t\t\t\t<RichText.Content tagName=\"figcaption\" value={ image.caption } />\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</figure>\n\t\t\t\t\t</li>\n\t\t\t\t);\n\t\t\t} ) }\n\t\t</ul>\n\t);\n}\n\nexport const name = 'core/gallery';\n\nexport const settings = {\n\ttitle: __( 'Gallery' ),\n\tdescription: __( 'Display multiple images in a rich gallery.' ),\n\ticon: <SVG viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><Path fill=\"none\" d=\"M0 0h24v24H0V0z\" /><G><Path d=\"M20 4v12H8V4h12m0-2H8L6 4v12l2 2h12l2-2V4l-2-2z\" /><Path d=\"M12 12l1 2 3-3 3 4H9z\" /><Path d=\"M2 6v14l2 2h14v-2H4V6H2z\" /></G></SVG>,\n\tcategory: 'common',\n\tkeywords: [ __( 'images' ), __( 'photos' ) ],\n\tattributes: blockAttributes,\n\tsupports: {\n\t\talign: true,\n\t},\n\n\ttransforms: {\n\t\tfrom: [\n\t\t\t{\n\t\t\t\ttype: 'block',\n\t\t\t\tisMultiBlock: true,\n\t\t\t\tblocks: [ 'core/image' ],\n\t\t\t\ttransform: ( attributes ) => {\n\t\t\t\t\tconst validImages = filter( attributes, ( { id, url } ) => id && url );\n\t\t\t\t\tif ( validImages.length > 0 ) {\n\t\t\t\t\t\treturn createBlock( 'core/gallery', {\n\t\t\t\t\t\t\timages: validImages.map( ( { id, url, alt, caption } ) => ( { id, url, alt, caption } ) ),\n\t\t\t\t\t\t} );\n\t\t\t\t\t}\n\t\t\t\t\treturn createBlock( 'core/gallery' );\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: 'shortcode',\n\t\t\t\ttag: 'gallery',\n\t\t\t\tattributes: {\n\t\t\t\t\timages: {\n\t\t\t\t\t\ttype: 'array',\n\t\t\t\t\t\tshortcode: ( { named: { ids } } ) => {\n\t\t\t\t\t\t\tif ( ! ids ) {\n\t\t\t\t\t\t\t\treturn [];\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn ids.split( ',' ).map( ( id ) => ( {\n\t\t\t\t\t\t\t\tid: parseInt( id, 10 ),\n\t\t\t\t\t\t\t} ) );\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tcolumns: {\n\t\t\t\t\t\ttype: 'number',\n\t\t\t\t\t\tshortcode: ( { named: { columns = '3' } } ) => {\n\t\t\t\t\t\t\treturn parseInt( columns, 10 );\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tlinkTo: {\n\t\t\t\t\t\ttype: 'string',\n\t\t\t\t\t\tshortcode: ( { named: { link = 'attachment' } } ) => {\n\t\t\t\t\t\t\treturn link === 'file' ? 'media' : link;\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\t// When created by drag and dropping multiple files on an insertion point\n\t\t\t\ttype: 'files',\n\t\t\t\tisMatch( files ) {\n\t\t\t\t\treturn files.length !== 1 && every( files, ( file ) => file.type.indexOf( 'image/' ) === 0 );\n\t\t\t\t},\n\t\t\t\ttransform( files, onChange ) {\n\t\t\t\t\tconst block = createBlock( 'core/gallery', {\n\t\t\t\t\t\timages: files.map( ( file ) => pickRelevantMediaFiles( {\n\t\t\t\t\t\t\turl: createBlobURL( file ),\n\t\t\t\t\t\t} ) ),\n\t\t\t\t\t} );\n\t\t\t\t\tmediaUpload( {\n\t\t\t\t\t\tfilesList: files,\n\t\t\t\t\t\tonFileChange: ( images ) => {\n\t\t\t\t\t\t\tonChange( block.clientId, {\n\t\t\t\t\t\t\t\timages: images.map( ( image ) => pickRelevantMediaFiles( image ) ),\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t},\n\t\t\t\t\t\tallowedTypes: [ 'image' ],\n\t\t\t\t\t} );\n\t\t\t\t\treturn block;\n\t\t\t\t},\n\t\t\t},\n\t\t],\n\t\tto: [\n\t\t\t{\n\t\t\t\ttype: 'block',\n\t\t\t\tblocks: [ 'core/image' ],\n\t\t\t\ttransform: ( { images } ) => {\n\t\t\t\t\tif ( images.length > 0 ) {\n\t\t\t\t\t\treturn images.map( ( { id, url, alt, caption } ) => createBlock( 'core/image', { id, url, alt, caption } ) );\n\t\t\t\t\t}\n\t\t\t\t\treturn createBlock( 'core/image' );\n\t\t\t\t},\n\t\t\t},\n\t\t],\n\t},\n\n\tedit,\n\n\tsave,\n\n\tdeprecated: [\n\t\t{\n\t\t\tattributes: deprecatedBlockAttributes,\n\t\t\tsave,\n\t\t},\n\t\t{\n\t\t\tattributes: deprecatedBlockAttributes,\n\t\t\tsave( { attributes } ) {\n\t\t\t\tconst { images, columns = defaultColumnsNumber( attributes ), imageCrop, linkTo } = attributes;\n\t\t\t\treturn (\n\t\t\t\t\t<ul className={ `columns-${ columns } ${ imageCrop ? 'is-cropped' : '' }` } >\n\t\t\t\t\t\t{ images.map( ( image ) => {\n\t\t\t\t\t\t\tlet href;\n\n\t\t\t\t\t\t\tswitch ( linkTo ) {\n\t\t\t\t\t\t\t\tcase 'media':\n\t\t\t\t\t\t\t\t\thref = image.url;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase 'attachment':\n\t\t\t\t\t\t\t\t\thref = image.link;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tconst img = <img src={ image.url } alt={ image.alt } data-id={ image.id } data-link={ image.link } />;\n\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<li key={ image.id || image.url } className=\"blocks-gallery-item\">\n\t\t\t\t\t\t\t\t\t<figure>\n\t\t\t\t\t\t\t\t\t\t{ href ? <a href={ href }>{ img }</a> : img }\n\t\t\t\t\t\t\t\t\t\t{ image.caption && image.caption.length > 0 && (\n\t\t\t\t\t\t\t\t\t\t\t<RichText.Content tagName=\"figcaption\" value={ image.caption } />\n\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t</figure>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t} ) }\n\t\t\t\t\t</ul>\n\t\t\t\t);\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tattributes: {\n\t\t\t\t...deprecatedBlockAttributes,\n\t\t\t\timages: {\n\t\t\t\t\t...deprecatedBlockAttributes.images,\n\t\t\t\t\tselector: 'div.wp-block-gallery figure.blocks-gallery-image img',\n\t\t\t\t},\n\t\t\t\talign: {\n\t\t\t\t\ttype: 'string',\n\t\t\t\t\tdefault: 'none',\n\t\t\t\t},\n\t\t\t},\n\n\t\t\tsave( { attributes } ) {\n\t\t\t\tconst { images, columns = defaultColumnsNumber( attributes ), align, imageCrop, linkTo } = attributes;\n\t\t\t\treturn (\n\t\t\t\t\t<div className={ `align${ align } columns-${ columns } ${ imageCrop ? 'is-cropped' : '' }` } >\n\t\t\t\t\t\t{ images.map( ( image ) => {\n\t\t\t\t\t\t\tlet href;\n\n\t\t\t\t\t\t\tswitch ( linkTo ) {\n\t\t\t\t\t\t\t\tcase 'media':\n\t\t\t\t\t\t\t\t\thref = image.url;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase 'attachment':\n\t\t\t\t\t\t\t\t\thref = image.link;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tconst img = <img src={ image.url } alt={ image.alt } data-id={ image.id } />;\n\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<figure key={ image.id || image.url } className=\"blocks-gallery-image\">\n\t\t\t\t\t\t\t\t\t{ href ? <a href={ href }>{ img }</a> : img }\n\t\t\t\t\t\t\t\t</figure>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t} ) }\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t},\n\t\t},\n\t],\n};\n"]}