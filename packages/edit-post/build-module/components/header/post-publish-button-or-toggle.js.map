{"version":3,"sources":["/Users/ky/Sites/valet/copesacontent/web/app/plugins/gutenberg/packages/edit-post/src/components/header/post-publish-button-or-toggle.js"],"names":["get","PostPublishPanelToggle","PostPublishButton","compose","withDispatch","withSelect","withViewportMatch","PostPublishButtonOrToggle","forceIsDirty","forceIsSaving","hasPublishAction","isBeingScheduled","isLessThanMediumViewport","isPending","isPublished","isPublishSidebarEnabled","isPublishSidebarOpened","isScheduled","togglePublishSidebar","button","toggle","select","getCurrentPost","isEditedPostBeingScheduled","isCurrentPostPending","isCurrentPostPublished","isCurrentPostScheduled","dispatch"],"mappings":";;AAAA;;;AAGA,SAASA,GAAT,QAAoB,QAApB;AAEA;;;;AAGA,SAASC,sBAAT,EAAiCC,iBAAjC,QAA0D,mBAA1D;AACA,SAASC,OAAT,QAAwB,oBAAxB;AACA,SAASC,YAAT,EAAuBC,UAAvB,QAAyC,iBAAzC;AACA,SAASC,iBAAT,QAAkC,qBAAlC;AAEA,OAAO,SAASC,yBAAT,OAYH;AAAA,MAXHC,YAWG,QAXHA,YAWG;AAAA,MAVHC,aAUG,QAVHA,aAUG;AAAA,MATHC,gBASG,QATHA,gBASG;AAAA,MARHC,gBAQG,QARHA,gBAQG;AAAA,MAPHC,wBAOG,QAPHA,wBAOG;AAAA,MANHC,SAMG,QANHA,SAMG;AAAA,MALHC,WAKG,QALHA,WAKG;AAAA,MAJHC,uBAIG,QAJHA,uBAIG;AAAA,MAHHC,sBAGG,QAHHA,sBAGG;AAAA,MAFHC,WAEG,QAFHA,WAEG;AAAA,MADHC,oBACG,QADHA,oBACG;AACH,MAAMC,MAAM,GACX,cAAC,iBAAD;AACC,IAAA,YAAY,EAAGX,YADhB;AAEC,IAAA,aAAa,EAAGC;AAFjB,IADD;AAMA,MAAMW,MAAM,GACX,cAAC,sBAAD;AACC,IAAA,MAAM,EAAGJ,sBADV;AAEC,IAAA,QAAQ,EAAGE,oBAFZ;AAGC,IAAA,aAAa,EAAGT;AAHjB,IADD;AAQA;;;;;;;;;;;;;;;AAcA,MACCK,WAAW,IACTG,WAAW,IAAIN,gBADjB,IAEEE,SAAS,IAAI,CAAEH,gBAAf,IAAmC,CAAEE,wBAHxC,EAIE;AACD,WAAOO,MAAP;AACA;AAED;;;;;;;;AAMA,MAAKP,wBAAL,EAAgC;AAC/B,WAAOQ,MAAP;AACA;;AAED,SAAOL,uBAAuB,GAAGK,MAAH,GAAYD,MAA1C;AACA;AAED,eAAehB,OAAO,CACrBE,UAAU,CAAE,UAAEgB,MAAF;AAAA,SAAgB;AAC3BX,IAAAA,gBAAgB,EAAEV,GAAG,CACpBqB,MAAM,CAAE,aAAF,CAAN,CAAwBC,cAAxB,EADoB,EAEpB,CAAE,QAAF,EAAY,mBAAZ,CAFoB,EAGpB,KAHoB,CADM;AAM3BX,IAAAA,gBAAgB,EAAEU,MAAM,CAAE,aAAF,CAAN,CAAwBE,0BAAxB,EANS;AAO3BV,IAAAA,SAAS,EAAEQ,MAAM,CAAE,aAAF,CAAN,CAAwBG,oBAAxB,EAPgB;AAQ3BV,IAAAA,WAAW,EAAEO,MAAM,CAAE,aAAF,CAAN,CAAwBI,sBAAxB,EARc;AAS3BV,IAAAA,uBAAuB,EAAEM,MAAM,CAAE,aAAF,CAAN,CAAwBN,uBAAxB,EATE;AAU3BC,IAAAA,sBAAsB,EAAEK,MAAM,CAAE,gBAAF,CAAN,CAA2BL,sBAA3B,EAVG;AAW3BC,IAAAA,WAAW,EAAEI,MAAM,CAAE,aAAF,CAAN,CAAwBK,sBAAxB;AAXc,GAAhB;AAAA,CAAF,CADW,EAcrBtB,YAAY,CAAE,UAAEuB,QAAF,EAAgB;AAAA,kBACIA,QAAQ,CAAE,gBAAF,CADZ;AAAA,MACrBT,oBADqB,aACrBA,oBADqB;;AAE7B,SAAO;AACNA,IAAAA,oBAAoB,EAApBA;AADM,GAAP;AAGA,CALW,CAdS,EAoBrBZ,iBAAiB,CAAE;AAAEM,EAAAA,wBAAwB,EAAE;AAA5B,CAAF,CApBI,CAAP,CAqBZL,yBArBY,CAAf","sourcesContent":["/**\n * External Dependencies\n */\nimport { get } from 'lodash';\n\n/**\n * WordPress dependencies.\n */\nimport { PostPublishPanelToggle, PostPublishButton } from '@wordpress/editor';\nimport { compose } from '@wordpress/compose';\nimport { withDispatch, withSelect } from '@wordpress/data';\nimport { withViewportMatch } from '@wordpress/viewport';\n\nexport function PostPublishButtonOrToggle( {\n\tforceIsDirty,\n\tforceIsSaving,\n\thasPublishAction,\n\tisBeingScheduled,\n\tisLessThanMediumViewport,\n\tisPending,\n\tisPublished,\n\tisPublishSidebarEnabled,\n\tisPublishSidebarOpened,\n\tisScheduled,\n\ttogglePublishSidebar,\n} ) {\n\tconst button = (\n\t\t<PostPublishButton\n\t\t\tforceIsDirty={ forceIsDirty }\n\t\t\tforceIsSaving={ forceIsSaving }\n\t\t/>\n\t);\n\tconst toggle = (\n\t\t<PostPublishPanelToggle\n\t\t\tisOpen={ isPublishSidebarOpened }\n\t\t\tonToggle={ togglePublishSidebar }\n\t\t\tforceIsSaving={ forceIsSaving }\n\t\t/>\n\t);\n\n\t/**\n\t * We want to show a BUTTON when the post status is at the _final stage_\n\t * for a particular role (see https://codex.wordpress.org/Post_Status):\n\t *\n\t * - is published\n\t * - is scheduled to be published\n\t * - is pending and can't be published (but only for viewports >= medium)\n\t *\n\t * Originally we considered showing a button for pending posts\n\t * that couldn't be published (for ex, for a contributor role).\n\t * Some languages can have really long translations for \"Submit for review\",\n\t * so given the lack of UI real state we decided to take into account the viewport\n\t * in that particular case.\n\t */\n\tif (\n\t\tisPublished ||\n\t\t( isScheduled && isBeingScheduled ) ||\n\t\t( isPending && ! hasPublishAction && ! isLessThanMediumViewport )\n\t) {\n\t\treturn button;\n\t}\n\n\t/**\n\t * Then, we take other things into account:\n\t *\n\t * - Show TOGGLE if it is small viewport.\n\t * - Otherwise, use publish sidebar status to decide - TOGGLE if enabled, BUTTON if not.\n\t */\n\tif ( isLessThanMediumViewport ) {\n\t\treturn toggle;\n\t}\n\n\treturn isPublishSidebarEnabled ? toggle : button;\n}\n\nexport default compose(\n\twithSelect( ( select ) => ( {\n\t\thasPublishAction: get(\n\t\t\tselect( 'core/editor' ).getCurrentPost(),\n\t\t\t[ '_links', 'wp:action-publish' ],\n\t\t\tfalse\n\t\t),\n\t\tisBeingScheduled: select( 'core/editor' ).isEditedPostBeingScheduled(),\n\t\tisPending: select( 'core/editor' ).isCurrentPostPending(),\n\t\tisPublished: select( 'core/editor' ).isCurrentPostPublished(),\n\t\tisPublishSidebarEnabled: select( 'core/editor' ).isPublishSidebarEnabled(),\n\t\tisPublishSidebarOpened: select( 'core/edit-post' ).isPublishSidebarOpened(),\n\t\tisScheduled: select( 'core/editor' ).isCurrentPostScheduled(),\n\t} ) ),\n\twithDispatch( ( dispatch ) => {\n\t\tconst { togglePublishSidebar } = dispatch( 'core/edit-post' );\n\t\treturn {\n\t\t\ttogglePublishSidebar,\n\t\t};\n\t} ),\n\twithViewportMatch( { isLessThanMediumViewport: '< medium' } ),\n)( PostPublishButtonOrToggle );\n"]}