{"version":3,"sources":["/Users/ky/Sites/valet/copesacontent/web/app/plugins/gutenberg/packages/editor/src/components/block-list/insertion-point.js"],"names":["BlockInsertionPoint","arguments","state","isInserterFocused","onBlurInserter","bind","onFocusInserter","event","stopPropagation","setState","props","showInsertionPoint","canShowInserter","rootClientId","insertIndex","Component","select","clientId","getBlockIndex","getBlockInsertionPoint","getBlock","isBlockInsertionPointVisible","blockIndex","insertionPoint","block","index"],"mappings":";;;;;;;;;AASA;;;;;;;;;;;;;;AANA;;AAKA;;AAEA;;AAKA;;AAfA;;;;AAKA;;;;AAOA;;;IAKMA,mB;;;;;AACL,iCAAc;AAAA;;AAAA;AACb,0HAAUC,SAAV;AACA,UAAKC,KAAL,GAAa;AACZC,MAAAA,iBAAiB,EAAE;AADP,KAAb;AAIA,UAAKC,cAAL,GAAsB,MAAKA,cAAL,CAAoBC,IAApB,mFAAtB;AACA,UAAKC,eAAL,GAAuB,MAAKA,eAAL,CAAqBD,IAArB,mFAAvB;AAPa;AAQb;;;;oCAEgBE,K,EAAQ;AACxB;AACA;AACA;AACAA,MAAAA,KAAK,CAACC,eAAN;AAEA,WAAKC,QAAL,CAAe;AACdN,QAAAA,iBAAiB,EAAE;AADL,OAAf;AAGA;;;qCAEgB;AAChB,WAAKM,QAAL,CAAe;AACdN,QAAAA,iBAAiB,EAAE;AADL,OAAf;AAGA;;;6BAEQ;AAAA,UACAA,iBADA,GACsB,KAAKD,KAD3B,CACAC,iBADA;AAAA,wBAOJ,KAAKO,KAPD;AAAA,UAGPC,kBAHO,eAGPA,kBAHO;AAAA,UAIPC,eAJO,eAIPA,eAJO;AAAA,UAKPC,YALO,eAKPA,YALO;AAAA,UAMPC,WANO,eAMPA,WANO;AASR,aACC;AAAK,QAAA,SAAS,EAAC;AAAf,SACGH,kBAAkB,IACnB;AAAK,QAAA,SAAS,EAAC;AAAf,QAFF,EAIGC,eAAe,IAChB;AACC,QAAA,OAAO,EAAG,KAAKN,eADhB;AAEC,QAAA,MAAM,EAAG,KAAKF,cAFf;AAGC,QAAA,SAAS,EACR,yBAAY,6CAAZ,EAA2D;AAC1D,wBAAcD;AAD4C,SAA3D;AAJF,SASC,4BAAC,iBAAD;AACC,QAAA,YAAY,EAAGU,YADhB;AAEC,QAAA,KAAK,EAAGC;AAFT,QATD,CALF,CADD;AAuBA;;;EA5DgCC,kB;;eA8DnB,sBAAY,UAAEC,MAAF,QAA0C;AAAA,MAA9BC,QAA8B,QAA9BA,QAA8B;AAAA,MAApBJ,YAAoB,QAApBA,YAAoB;;AAAA,gBAMhEG,MAAM,CAAE,aAAF,CAN0D;AAAA,MAEnEE,aAFmE,WAEnEA,aAFmE;AAAA,MAGnEC,sBAHmE,WAGnEA,sBAHmE;AAAA,MAInEC,QAJmE,WAInEA,QAJmE;AAAA,MAKnEC,4BALmE,WAKnEA,4BALmE;;AAOpE,MAAMC,UAAU,GAAGJ,aAAa,CAAED,QAAF,EAAYJ,YAAZ,CAAhC;AACA,MAAMC,WAAW,GAAGQ,UAApB;AACA,MAAMC,cAAc,GAAGJ,sBAAsB,EAA7C;AACA,MAAMK,KAAK,GAAGJ,QAAQ,CAAEH,QAAF,CAAtB;AACA,MAAMN,kBAAkB,GACvBU,4BAA4B,MAC5BE,cAAc,CAACE,KAAf,KAAyBX,WADzB,IAEAS,cAAc,CAACV,YAAf,KAAgCA,YAFhC,IAGA,CAAE,sCAA0BW,KAA1B,CAJH;AAOA,SAAO;AAAEb,IAAAA,kBAAkB,EAAlBA,kBAAF;AAAsBG,IAAAA,WAAW,EAAXA;AAAtB,GAAP;AACA,CAnBc,EAmBVd,mBAnBU,C","sourcesContent":["/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { isUnmodifiedDefaultBlock } from '@wordpress/blocks';\nimport { Component } from '@wordpress/element';\nimport { withSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport Inserter from '../inserter';\n\nclass BlockInsertionPoint extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\t\tthis.state = {\n\t\t\tisInserterFocused: false,\n\t\t};\n\n\t\tthis.onBlurInserter = this.onBlurInserter.bind( this );\n\t\tthis.onFocusInserter = this.onFocusInserter.bind( this );\n\t}\n\n\tonFocusInserter( event ) {\n\t\t// Stop propagation of the focus event to avoid selecting the current\n\t\t// block while inserting a new block, as it is not relevant to sibling\n\t\t// insertion and conflicts with contextual toolbar placement.\n\t\tevent.stopPropagation();\n\n\t\tthis.setState( {\n\t\t\tisInserterFocused: true,\n\t\t} );\n\t}\n\n\tonBlurInserter() {\n\t\tthis.setState( {\n\t\t\tisInserterFocused: false,\n\t\t} );\n\t}\n\n\trender() {\n\t\tconst { isInserterFocused } = this.state;\n\t\tconst {\n\t\t\tshowInsertionPoint,\n\t\t\tcanShowInserter,\n\t\t\trootClientId,\n\t\t\tinsertIndex,\n\t\t} = this.props;\n\n\t\treturn (\n\t\t\t<div className=\"editor-block-list__insertion-point\">\n\t\t\t\t{ showInsertionPoint && (\n\t\t\t\t\t<div className=\"editor-block-list__insertion-point-indicator\" />\n\t\t\t\t) }\n\t\t\t\t{ canShowInserter && (\n\t\t\t\t\t<div\n\t\t\t\t\t\tonFocus={ this.onFocusInserter }\n\t\t\t\t\t\tonBlur={ this.onBlurInserter }\n\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\tclassnames( 'editor-block-list__insertion-point-inserter', {\n\t\t\t\t\t\t\t\t'is-visible': isInserterFocused,\n\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Inserter\n\t\t\t\t\t\t\trootClientId={ rootClientId }\n\t\t\t\t\t\t\tindex={ insertIndex }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t) }\n\t\t\t</div>\n\t\t);\n\t}\n}\nexport default withSelect( ( select, { clientId, rootClientId } ) => {\n\tconst {\n\t\tgetBlockIndex,\n\t\tgetBlockInsertionPoint,\n\t\tgetBlock,\n\t\tisBlockInsertionPointVisible,\n\t} = select( 'core/editor' );\n\tconst blockIndex = getBlockIndex( clientId, rootClientId );\n\tconst insertIndex = blockIndex;\n\tconst insertionPoint = getBlockInsertionPoint();\n\tconst block = getBlock( clientId );\n\tconst showInsertionPoint = (\n\t\tisBlockInsertionPointVisible() &&\n\t\tinsertionPoint.index === insertIndex &&\n\t\tinsertionPoint.rootClientId === rootClientId &&\n\t\t! isUnmodifiedDefaultBlock( block )\n\t);\n\n\treturn { showInsertionPoint, insertIndex };\n} )( BlockInsertionPoint );\n"]}