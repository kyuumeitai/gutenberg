{"version":3,"sources":["/Users/ky/Sites/valet/copesacontent/web/app/plugins/gutenberg/packages/editor/src/components/copy-handler/index.js"],"names":["Component","serialize","documentHasSelection","withSelect","withDispatch","compose","CopyHandler","arguments","onCopy","bind","onCut","document","addEventListener","removeEventListener","event","props","multiSelectedBlocks","selectedBlock","length","serialized","clipboardData","setData","preventDefault","multiSelectedBlockClientIds","onRemove","select","getMultiSelectedBlocks","getMultiSelectedBlockClientIds","getSelectedBlock","dispatch","removeBlocks"],"mappings":";;;;;;;AAAA;;;AAGA,SAASA,SAAT,QAA0B,oBAA1B;AACA,SAASC,SAAT,QAA0B,mBAA1B;AACA,SAASC,oBAAT,QAAqC,gBAArC;AACA,SAASC,UAAT,EAAqBC,YAArB,QAAyC,iBAAzC;AACA,SAASC,OAAT,QAAwB,oBAAxB;;IAEMC,W;;;;;AACL,yBAAc;AAAA;;AAAA;;AACb,sFAAUC,SAAV;AAEA,UAAKC,MAAL,GAAc,MAAKA,MAAL,CAAYC,IAAZ,uDAAd;AACA,UAAKC,KAAL,GAAa,MAAKA,KAAL,CAAWD,IAAX,uDAAb;AAJa;AAKb;;;;wCAEmB;AACnBE,MAAAA,QAAQ,CAACC,gBAAT,CAA2B,MAA3B,EAAmC,KAAKJ,MAAxC;AACAG,MAAAA,QAAQ,CAACC,gBAAT,CAA2B,KAA3B,EAAkC,KAAKF,KAAvC;AACA;;;2CAEsB;AACtBC,MAAAA,QAAQ,CAACE,mBAAT,CAA8B,MAA9B,EAAsC,KAAKL,MAA3C;AACAG,MAAAA,QAAQ,CAACE,mBAAT,CAA8B,KAA9B,EAAqC,KAAKH,KAA1C;AACA;;;2BAEOI,K,EAAQ;AAAA,wBACgC,KAAKC,KADrC;AAAA,UACPC,mBADO,eACPA,mBADO;AAAA,UACcC,aADd,eACcA,aADd;;AAGf,UAAK,CAAED,mBAAmB,CAACE,MAAtB,IAAgC,CAAED,aAAvC,EAAuD;AACtD;AACA,OALc,CAOf;;;AACA,UAAKA,aAAa,IAAIf,oBAAoB,EAA1C,EAA+C;AAC9C;AACA;;AAED,UAAMiB,UAAU,GAAGlB,SAAS,CAAEgB,aAAa,IAAID,mBAAnB,CAA5B;AAEAF,MAAAA,KAAK,CAACM,aAAN,CAAoBC,OAApB,CAA6B,YAA7B,EAA2CF,UAA3C;AACAL,MAAAA,KAAK,CAACM,aAAN,CAAoBC,OAApB,CAA6B,WAA7B,EAA0CF,UAA1C;AAEAL,MAAAA,KAAK,CAACQ,cAAN;AACA;;;0BAEMR,K,EAAQ;AAAA,UACNS,2BADM,GAC0B,KAAKR,KAD/B,CACNQ,2BADM;AAGd,WAAKf,MAAL,CAAaM,KAAb;;AAEA,UAAKS,2BAA2B,CAACL,MAAjC,EAA0C;AACzC,aAAKH,KAAL,CAAWS,QAAX,CAAqBD,2BAArB;AACA;AACD;;;6BAEQ;AACR,aAAO,IAAP;AACA;;;;EAlDwBvB,S;;AAqD1B,eAAeK,OAAO,CAAE,CACvBF,UAAU,CAAE,UAAEsB,MAAF,EAAc;AAAA,gBAKrBA,MAAM,CAAE,aAAF,CALe;AAAA,MAExBC,sBAFwB,WAExBA,sBAFwB;AAAA,MAGxBC,8BAHwB,WAGxBA,8BAHwB;AAAA,MAIxBC,gBAJwB,WAIxBA,gBAJwB;;AAMzB,SAAO;AACNZ,IAAAA,mBAAmB,EAAEU,sBAAsB,EADrC;AAENH,IAAAA,2BAA2B,EAAEI,8BAA8B,EAFrD;AAGNV,IAAAA,aAAa,EAAEW,gBAAgB;AAHzB,GAAP;AAKA,CAXS,CADa,EAavBxB,YAAY,CAAE,UAAEyB,QAAF;AAAA,SAAkB;AAC/BL,IAAAA,QAAQ,EAAEK,QAAQ,CAAE,aAAF,CAAR,CAA0BC;AADL,GAAlB;AAAA,CAAF,CAbW,CAAF,CAAP,CAgBVxB,WAhBU,CAAf","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { Component } from '@wordpress/element';\nimport { serialize } from '@wordpress/blocks';\nimport { documentHasSelection } from '@wordpress/dom';\nimport { withSelect, withDispatch } from '@wordpress/data';\nimport { compose } from '@wordpress/compose';\n\nclass CopyHandler extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\n\t\tthis.onCopy = this.onCopy.bind( this );\n\t\tthis.onCut = this.onCut.bind( this );\n\t}\n\n\tcomponentDidMount() {\n\t\tdocument.addEventListener( 'copy', this.onCopy );\n\t\tdocument.addEventListener( 'cut', this.onCut );\n\t}\n\n\tcomponentWillUnmount() {\n\t\tdocument.removeEventListener( 'copy', this.onCopy );\n\t\tdocument.removeEventListener( 'cut', this.onCut );\n\t}\n\n\tonCopy( event ) {\n\t\tconst { multiSelectedBlocks, selectedBlock } = this.props;\n\n\t\tif ( ! multiSelectedBlocks.length && ! selectedBlock ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Let native copy behaviour take over in input fields.\n\t\tif ( selectedBlock && documentHasSelection() ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst serialized = serialize( selectedBlock || multiSelectedBlocks );\n\n\t\tevent.clipboardData.setData( 'text/plain', serialized );\n\t\tevent.clipboardData.setData( 'text/html', serialized );\n\n\t\tevent.preventDefault();\n\t}\n\n\tonCut( event ) {\n\t\tconst { multiSelectedBlockClientIds } = this.props;\n\n\t\tthis.onCopy( event );\n\n\t\tif ( multiSelectedBlockClientIds.length ) {\n\t\t\tthis.props.onRemove( multiSelectedBlockClientIds );\n\t\t}\n\t}\n\n\trender() {\n\t\treturn null;\n\t}\n}\n\nexport default compose( [\n\twithSelect( ( select ) => {\n\t\tconst {\n\t\t\tgetMultiSelectedBlocks,\n\t\t\tgetMultiSelectedBlockClientIds,\n\t\t\tgetSelectedBlock,\n\t\t} = select( 'core/editor' );\n\t\treturn {\n\t\t\tmultiSelectedBlocks: getMultiSelectedBlocks(),\n\t\t\tmultiSelectedBlockClientIds: getMultiSelectedBlockClientIds(),\n\t\t\tselectedBlock: getSelectedBlock(),\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch ) => ( {\n\t\tonRemove: dispatch( 'core/editor' ).removeBlocks,\n\t} ) ),\n] )( CopyHandler );\n"]}