{"version":3,"sources":["/Users/ky/Sites/valet/copesacontent/web/app/plugins/gutenberg/packages/editor/src/store/selectors.js"],"names":["POST_UPDATE_TRANSACTION_ID","PERMALINK_POSTNAME_REGEX","INSERTER_UTILITY_HIGH","INSERTER_UTILITY_MEDIUM","INSERTER_UTILITY_LOW","INSERTER_UTILITY_NONE","MILLISECONDS_PER_HOUR","MILLISECONDS_PER_DAY","MILLISECONDS_PER_WEEK","EMPTY_ARRAY","hasEditorUndo","state","editor","past","length","hasEditorRedo","future","isEditedPostNew","getCurrentPost","status","isEditedPostDirty","isDirty","inSomeHistory","isCleanNewPost","currentPost","getCurrentPostType","type","getCurrentPostId","id","getCurrentPostRevisionsCount","getCurrentPostLastRevisionId","getPostEdits","present","edits","getReferenceByDistinctEdits","getCurrentPostAttribute","attributeName","post","hasOwnProperty","getEditedPostAttribute","getEditedPostContent","getAutosaveAttribute","hasAutosave","autosave","getAutosave","getEditedPostVisibility","password","isCurrentPostPending","isCurrentPostPublished","indexOf","date","isBefore","isCurrentPostScheduled","isEditedPostPublishable","isEditedPostSaveable","isSavingPost","isEditedPostEmpty","blocks","getBlocksForSerialization","name","isEditedPostAutosaveable","some","field","isEditedPostBeingScheduled","now","add","isAfter","isEditedPostDateFloating","modified","getBlockDependantsCacheBust","clientId","getBlockOrder","innerBlockClientId","getBlock","getBlockName","block","byClientId","attributes","result","value","key","source","getPostMeta","meta","innerBlocks","getBlocks","rootClientId","getClientIdsOfDescendants","clientIds","descendants","getClientIdsWithDescendants","topLevelIds","order","getGlobalBlockCount","blockName","count","getBlocksByClientId","getBlockCount","getBlockSelectionStart","blockSelection","start","getBlockSelectionEnd","end","getSelectedBlockCount","multiSelectedBlockCount","getMultiSelectedBlockClientIds","hasSelectedBlock","getSelectedBlockClientId","getSelectedBlock","getBlockRootClientId","getBlockHierarchyRootClientId","current","getAdjacentBlockClientId","startClientId","modifier","undefined","getFirstMultiSelectedBlockClientId","getLastMultiSelectedBlockClientId","orderSet","index","nextIndex","getPreviousBlockClientId","getNextBlockClientId","getSelectedBlocksInitialCaretPosition","initialPosition","blockOrder","startIndex","endIndex","slice","getMultiSelectedBlocks","multiSelectedBlockClientIds","map","isFirstMultiSelectedBlock","isBlockMultiSelected","isAncestorMultiSelected","ancestorClientId","isMultiSelected","getMultiSelectedBlocksStartClientId","getMultiSelectedBlocksEndClientId","getBlockIndex","isBlockSelected","hasSelectedInnerBlock","deep","innerClientId","isBlockWithinSelection","hasMultiSelection","isMultiSelecting","isSelectionEnabled","isEnabled","getBlockMode","blocksMode","isTyping","isCaretWithinFormattedText","getBlockInsertionPoint","insertionPoint","isBlockInsertionPointVisible","isValidTemplate","template","isValid","getTemplate","settings","getTemplateLock","templateLock","blockListSettings","getBlockListSettings","saving","requesting","didPostSaveRequestSucceed","successful","didPostSaveRequestFail","error","isAutosavingPost","isAutosave","getSuggestedPostFormat","isSingleUnmodifiedDefaultBlock","content","isSingleFreeformBlock","canInsertBlockType","checkAllowList","list","item","defaultResult","blockType","getEditorSettings","allowedBlockTypes","isBlockAllowedInEditor","isLocked","parentBlockListSettings","parentAllowedBlocks","hasParentAllowedBlock","blockAllowedParentBlocks","parent","parentName","hasBlockAllowedParent","getInsertUsage","preferences","insertUsage","getInserterItems","calculateUtility","category","isContextual","calculateFrecency","time","duration","Date","shouldIncludeBlockType","buildBlockTypeInserterItem","isDisabled","initialAttributes","title","icon","keywords","utility","frecency","hasChildBlocksWithInserterSupport","shouldIncludeReusableBlock","reusableBlock","referencedBlock","referencedBlockType","buildReusableBlockInserterItem","ref","blockTypeInserterItems","filter","reusableBlockInserterItems","__experimentalGetReusableBlocks","reusableBlocks","data","__experimentalGetReusableBlock","isTemporary","isNaN","parseInt","__experimentalIsSavingReusableBlock","isSaving","__experimentalIsFetchingReusableBlock","isFetching","getStateBeforeOptimisticTransaction","transactionId","transaction","optimist","entry","beforeState","action","isPublishingPost","stateBeforeRequest","isPermalinkEditable","permalinkTemplate","test","getPermalink","getPermalinkParts","prefix","postName","suffix","split","predicate","getTokenSettings","tokens","isPostLocked","postLock","isPostSavingLocked","postSavingLock","isPostLockTakeover","isTakeover","getPostLockUser","user","getActivePostLock","activePostLock","canUserUseUnfilteredHTML","isPublishSidebarEnabled","PREFERENCES_DEFAULTS","getNotices","alternative","plugin","version","getReusableBlock","isSavingReusableBlock","hint","isFetchingReusableBlock","getReusableBlocks"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport {\n\tcastArray,\n\tflatMap,\n\tfind,\n\tfirst,\n\tget,\n\thas,\n\tincludes,\n\tisArray,\n\tisBoolean,\n\tlast,\n\tmap,\n\torderBy,\n\treduce,\n\tsize,\n\tsome,\n} from 'lodash';\nimport createSelector from 'rememo';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tserialize,\n\tgetBlockType,\n\tgetBlockTypes,\n\thasBlockSupport,\n\thasChildBlocksWithInserterSupport,\n\tgetFreeformContentHandlerName,\n\tisUnmodifiedDefaultBlock,\n} from '@wordpress/blocks';\nimport { moment } from '@wordpress/date';\nimport { removep } from '@wordpress/autop';\nimport { select } from '@wordpress/data';\nimport deprecated from '@wordpress/deprecated';\n\n/**\n * Dependencies\n */\nimport { PREFERENCES_DEFAULTS } from './defaults';\n\n/***\n * Module constants\n */\nexport const POST_UPDATE_TRANSACTION_ID = 'post-update';\nconst PERMALINK_POSTNAME_REGEX = /%(?:postname|pagename)%/;\nexport const INSERTER_UTILITY_HIGH = 3;\nexport const INSERTER_UTILITY_MEDIUM = 2;\nexport const INSERTER_UTILITY_LOW = 1;\nexport const INSERTER_UTILITY_NONE = 0;\nconst MILLISECONDS_PER_HOUR = 3600 * 1000;\nconst MILLISECONDS_PER_DAY = 24 * 3600 * 1000;\nconst MILLISECONDS_PER_WEEK = 7 * 24 * 3600 * 1000;\n\n/**\n * Shared reference to an empty array for cases where it is important to avoid\n * returning a new array reference on every invocation, as in a connected or\n * other pure component which performs `shouldComponentUpdate` check on props.\n * This should be used as a last resort, since the normalized data should be\n * maintained by the reducer result in state.\n *\n * @type {Array}\n */\nconst EMPTY_ARRAY = [];\n\n/**\n * Returns true if any past editor history snapshots exist, or false otherwise.\n *\n * @param {Object} state Global application state.\n *\n * @return {boolean} Whether undo history exists.\n */\nexport function hasEditorUndo( state ) {\n\treturn state.editor.past.length > 0;\n}\n\n/**\n * Returns true if any future editor history snapshots exist, or false\n * otherwise.\n *\n * @param {Object} state Global application state.\n *\n * @return {boolean} Whether redo history exists.\n */\nexport function hasEditorRedo( state ) {\n\treturn state.editor.future.length > 0;\n}\n\n/**\n * Returns true if the currently edited post is yet to be saved, or false if\n * the post has been saved.\n *\n * @param {Object} state Global application state.\n *\n * @return {boolean} Whether the post is new.\n */\nexport function isEditedPostNew( state ) {\n\treturn getCurrentPost( state ).status === 'auto-draft';\n}\n\n/**\n * Returns true if there are unsaved values for the current edit session, or\n * false if the editing state matches the saved or new post.\n *\n * @param {Object} state Global application state.\n *\n * @return {boolean} Whether unsaved values exist.\n */\nexport function isEditedPostDirty( state ) {\n\treturn state.editor.isDirty || inSomeHistory( state, isEditedPostDirty );\n}\n\n/**\n * Returns true if there are no unsaved values for the current edit session and\n * if the currently edited post is new (has never been saved before).\n *\n * @param {Object} state Global application state.\n *\n * @return {boolean} Whether new post and unsaved values exist.\n */\nexport function isCleanNewPost( state ) {\n\treturn ! isEditedPostDirty( state ) && isEditedPostNew( state );\n}\n\n/**\n * Returns the post currently being edited in its last known saved state, not\n * including unsaved edits. Returns an object containing relevant default post\n * values if the post has not yet been saved.\n *\n * @param {Object} state Global application state.\n *\n * @return {Object} Post object.\n */\nexport function getCurrentPost( state ) {\n\treturn state.currentPost;\n}\n\n/**\n * Returns the post type of the post currently being edited.\n *\n * @param {Object} state Global application state.\n *\n * @return {string} Post type.\n */\nexport function getCurrentPostType( state ) {\n\treturn state.currentPost.type;\n}\n\n/**\n * Returns the ID of the post currently being edited, or null if the post has\n * not yet been saved.\n *\n * @param {Object} state Global application state.\n *\n * @return {?number} ID of current post.\n */\nexport function getCurrentPostId( state ) {\n\treturn getCurrentPost( state ).id || null;\n}\n\n/**\n * Returns the number of revisions of the post currently being edited.\n *\n * @param {Object} state Global application state.\n *\n * @return {number} Number of revisions.\n */\nexport function getCurrentPostRevisionsCount( state ) {\n\treturn get( getCurrentPost( state ), [ '_links', 'version-history', 0, 'count' ], 0 );\n}\n\n/**\n * Returns the last revision ID of the post currently being edited,\n * or null if the post has no revisions.\n *\n * @param {Object} state Global application state.\n *\n * @return {?number} ID of the last revision.\n */\nexport function getCurrentPostLastRevisionId( state ) {\n\treturn get( getCurrentPost( state ), [ '_links', 'predecessor-version', 0, 'id' ], null );\n}\n\n/**\n * Returns any post values which have been changed in the editor but not yet\n * been saved.\n *\n * @param {Object} state Global application state.\n *\n * @return {Object} Object of key value pairs comprising unsaved edits.\n */\nexport function getPostEdits( state ) {\n\treturn state.editor.present.edits;\n}\n\n/**\n * Returns a new reference when edited values have changed. This is useful in\n * inferring where an edit has been made between states by comparison of the\n * return values using strict equality.\n *\n * @example\n *\n * ```\n * const hasEditOccurred = (\n *    getReferenceByDistinctEdits( beforeState ) !==\n *    getReferenceByDistinctEdits( afterState )\n * );\n * ```\n *\n * @param {Object} state Editor state.\n *\n * @return {*} A value whose reference will change only when an edit occurs.\n */\nexport const getReferenceByDistinctEdits = createSelector(\n\t() => [],\n\t( state ) => [ state.editor ],\n);\n\n/**\n * Returns an attribute value of the saved post.\n *\n * @param {Object} state         Global application state.\n * @param {string} attributeName Post attribute name.\n *\n * @return {*} Post attribute value.\n */\nexport function getCurrentPostAttribute( state, attributeName ) {\n\tconst post = getCurrentPost( state );\n\tif ( post.hasOwnProperty( attributeName ) ) {\n\t\treturn post[ attributeName ];\n\t}\n}\n\n/**\n * Returns a single attribute of the post being edited, preferring the unsaved\n * edit if one exists, but falling back to the attribute for the last known\n * saved state of the post.\n *\n * @param {Object} state         Global application state.\n * @param {string} attributeName Post attribute name.\n *\n * @return {*} Post attribute value.\n */\nexport function getEditedPostAttribute( state, attributeName ) {\n\tconst edits = getPostEdits( state );\n\n\t// Special cases\n\tswitch ( attributeName ) {\n\t\tcase 'content':\n\t\t\treturn getEditedPostContent( state );\n\t}\n\n\tif ( ! edits.hasOwnProperty( attributeName ) ) {\n\t\treturn getCurrentPostAttribute( state, attributeName );\n\t}\n\n\treturn edits[ attributeName ];\n}\n\n/**\n * Returns an attribute value of the current autosave revision for a post, or\n * null if there is no autosave for the post.\n *\n * @param {Object} state         Global application state.\n * @param {string} attributeName Autosave attribute name.\n *\n * @return {*} Autosave attribute value.\n */\nexport function getAutosaveAttribute( state, attributeName ) {\n\tif ( ! hasAutosave( state ) ) {\n\t\treturn null;\n\t}\n\n\tconst autosave = getAutosave( state );\n\tif ( autosave.hasOwnProperty( attributeName ) ) {\n\t\treturn autosave[ attributeName ];\n\t}\n}\n\n/**\n * Returns the current visibility of the post being edited, preferring the\n * unsaved value if different than the saved post. The return value is one of\n * \"private\", \"password\", or \"public\".\n *\n * @param {Object} state Global application state.\n *\n * @return {string} Post visibility.\n */\nexport function getEditedPostVisibility( state ) {\n\tconst status = getEditedPostAttribute( state, 'status' );\n\tconst password = getEditedPostAttribute( state, 'password' );\n\n\tif ( status === 'private' ) {\n\t\treturn 'private';\n\t} else if ( password ) {\n\t\treturn 'password';\n\t}\n\treturn 'public';\n}\n\n/**\n * Returns true if post is pending review.\n *\n * @param {Object} state Global application state.\n *\n * @return {boolean} Whether current post is pending review.\n */\nexport function isCurrentPostPending( state ) {\n\treturn getCurrentPost( state ).status === 'pending';\n}\n\n/**\n * Return true if the current post has already been published.\n *\n * @param {Object} state Global application state.\n *\n * @return {boolean} Whether the post has been published.\n */\nexport function isCurrentPostPublished( state ) {\n\tconst post = getCurrentPost( state );\n\n\treturn [ 'publish', 'private' ].indexOf( post.status ) !== -1 ||\n\t\t( post.status === 'future' && moment( post.date ).isBefore( moment() ) );\n}\n\n/**\n * Returns true if post is already scheduled.\n *\n * @param {Object} state Global application state.\n *\n * @return {boolean} Whether current post is scheduled to be posted.\n */\nexport function isCurrentPostScheduled( state ) {\n\treturn getCurrentPost( state ).status === 'future' && ! isCurrentPostPublished( state );\n}\n\n/**\n * Return true if the post being edited can be published.\n *\n * @param {Object} state Global application state.\n *\n * @return {boolean} Whether the post can been published.\n */\nexport function isEditedPostPublishable( state ) {\n\tconst post = getCurrentPost( state );\n\n\t// TODO: Post being publishable should be superset of condition of post\n\t// being saveable. Currently this restriction is imposed at UI.\n\t//\n\t//  See: <PostPublishButton /> (`isButtonEnabled` assigned by `isSaveable`)\n\n\treturn isEditedPostDirty( state ) || [ 'publish', 'private', 'future' ].indexOf( post.status ) === -1;\n}\n\n/**\n * Returns true if the post can be saved, or false otherwise. A post must\n * contain a title, an excerpt, or non-empty content to be valid for save.\n *\n * @param {Object} state Global application state.\n *\n * @return {boolean} Whether the post can be saved.\n */\nexport function isEditedPostSaveable( state ) {\n\tif ( isSavingPost( state ) ) {\n\t\treturn false;\n\t}\n\n\t// TODO: Post should not be saveable if not dirty. Cannot be added here at\n\t// this time since posts where meta boxes are present can be saved even if\n\t// the post is not dirty. Currently this restriction is imposed at UI, but\n\t// should be moved here.\n\t//\n\t//  See: `isEditedPostPublishable` (includes `isEditedPostDirty` condition)\n\t//  See: <PostSavedState /> (`forceIsDirty` prop)\n\t//  See: <PostPublishButton /> (`forceIsDirty` prop)\n\t//  See: https://github.com/WordPress/gutenberg/pull/4184\n\n\treturn (\n\t\t!! getEditedPostAttribute( state, 'title' ) ||\n\t\t!! getEditedPostAttribute( state, 'excerpt' ) ||\n\t\t! isEditedPostEmpty( state )\n\t);\n}\n\n/**\n * Returns true if the edited post has content. A post has content if it has at\n * least one saveable block or otherwise has a non-empty content property\n * assigned.\n *\n * @param {Object} state Global application state.\n *\n * @return {boolean} Whether post has content.\n */\nexport function isEditedPostEmpty( state ) {\n\tconst blocks = getBlocksForSerialization( state );\n\n\t// While the condition of truthy content string is sufficient to determine\n\t// emptiness, testing saveable blocks length is a trivial operation. Since\n\t// this function can be called frequently, optimize for the fast case as a\n\t// condition of the mere existence of blocks. Note that the value of edited\n\t// content is used in place of blocks, thus allowed to fall through.\n\tif ( blocks.length && ! ( 'content' in getPostEdits( state ) ) ) {\n\t\t// Pierce the abstraction of the serializer in knowing that blocks are\n\t\t// joined with with newlines such that even if every individual block\n\t\t// produces an empty save result, the serialized content is non-empty.\n\t\tif ( blocks.length > 1 ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Freeform and unregistered blocks omit comment delimiters in their\n\t\t// output. The freeform block specifically may produce an empty string\n\t\t// to save. In the case of a single freeform block, fall through to the\n\t\t// full serialize. Otherwise, the single block is assumed non-empty by\n\t\t// virtue of its comment delimiters.\n\t\tif ( blocks[ 0 ].name !== getFreeformContentHandlerName() ) {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\treturn ! getEditedPostContent( state );\n}\n\n/**\n * Returns true if the post can be autosaved, or false otherwise.\n *\n * @param  {Object}  state Global application state.\n *\n * @return {boolean} Whether the post can be autosaved.\n */\nexport function isEditedPostAutosaveable( state ) {\n\t// A post must contain a title, an excerpt, or non-empty content to be valid for autosaving.\n\tif ( ! isEditedPostSaveable( state ) ) {\n\t\treturn false;\n\t}\n\n\t// If we don't already have an autosave, the post is autosaveable.\n\tif ( ! hasAutosave( state ) ) {\n\t\treturn true;\n\t}\n\n\t// If the title, excerpt or content has changed, the post is autosaveable.\n\tconst autosave = getAutosave( state );\n\treturn [ 'title', 'excerpt', 'content' ].some( ( field ) => (\n\t\tautosave[ field ] !== getEditedPostAttribute( state, field )\n\t) );\n}\n\n/**\n * Returns the current autosave, or null if one is not set (i.e. if the post\n * has yet to be autosaved, or has been saved or published since the last\n * autosave).\n *\n * @param {Object} state Editor state.\n *\n * @return {?Object} Current autosave, if exists.\n */\nexport function getAutosave( state ) {\n\treturn state.autosave;\n}\n\n/**\n * Returns the true if there is an existing autosave, otherwise false.\n *\n * @param {Object} state Global application state.\n *\n * @return {boolean} Whether there is an existing autosave.\n */\nexport function hasAutosave( state ) {\n\treturn !! getAutosave( state );\n}\n\n/**\n * Return true if the post being edited is being scheduled. Preferring the\n * unsaved status values.\n *\n * @param {Object} state Global application state.\n *\n * @return {boolean} Whether the post has been published.\n */\nexport function isEditedPostBeingScheduled( state ) {\n\tconst date = moment( getEditedPostAttribute( state, 'date' ) );\n\t// Adding 1 minute as an error threshold between the server and the client dates.\n\tconst now = moment().add( 1, 'minute' );\n\n\treturn date.isAfter( now );\n}\n\n/**\n * Returns whether the current post should be considered to have a \"floating\"\n * date (i.e. that it would publish \"Immediately\" rather than at a set time).\n *\n * Unlike in the PHP backend, the REST API returns a full date string for posts\n * where the 0000-00-00T00:00:00 placeholder is present in the database. To\n * infer that a post is set to publish \"Immediately\" we check whether the date\n * and modified date are the same.\n *\n * @param  {Object}  state Editor state.\n *\n * @return {boolean} Whether the edited post has a floating date value.\n */\nexport function isEditedPostDateFloating( state ) {\n\tconst date = getEditedPostAttribute( state, 'date' );\n\tconst modified = getEditedPostAttribute( state, 'modified' );\n\tconst status = getEditedPostAttribute( state, 'status' );\n\tif ( status === 'draft' || status === 'auto-draft' ) {\n\t\treturn date === modified;\n\t}\n\treturn false;\n}\n\n/**\n * Returns a new reference when the inner blocks of a given block client ID\n * change. This is used exclusively as a memoized selector dependant, relying\n * on this selector's shared return value and recursively those of its inner\n * blocks defined as dependencies. This abuses mechanics of the selector\n * memoization to return from the original selector function only when\n * dependants change.\n *\n * @param {Object} state    Editor state.\n * @param {string} clientId Block client ID.\n *\n * @return {*} A value whose reference will change only when inner blocks of\n *             the given block client ID change.\n */\nexport const getBlockDependantsCacheBust = createSelector(\n\t() => [],\n\t( state, clientId ) => map(\n\t\tgetBlockOrder( state, clientId ),\n\t\t( innerBlockClientId ) => getBlock( state, innerBlockClientId ),\n\t),\n);\n\n/**\n * Returns a block's name given its client ID, or null if no block exists with\n * the client ID.\n *\n * @param {Object} state    Editor state.\n * @param {string} clientId Block client ID.\n *\n * @return {string} Block name.\n */\nexport function getBlockName( state, clientId ) {\n\tconst block = state.editor.present.blocks.byClientId[ clientId ];\n\treturn block ? block.name : null;\n}\n\n/**\n * Returns a block given its client ID. This is a parsed copy of the block,\n * containing its `blockName`, `clientId`, and current `attributes` state. This\n * is not the block's registration settings, which must be retrieved from the\n * blocks module registration store.\n *\n * @param {Object} state    Editor state.\n * @param {string} clientId Block client ID.\n *\n * @return {Object} Parsed block object.\n */\nexport const getBlock = createSelector(\n\t( state, clientId ) => {\n\t\tconst block = state.editor.present.blocks.byClientId[ clientId ];\n\t\tif ( ! block ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tlet { attributes } = block;\n\n\t\t// Inject custom source attribute values.\n\t\t//\n\t\t// TODO: Create generic external sourcing pattern, not explicitly\n\t\t// targeting meta attributes.\n\t\tconst type = getBlockType( block.name );\n\t\tif ( type ) {\n\t\t\tattributes = reduce( type.attributes, ( result, value, key ) => {\n\t\t\t\tif ( value.source === 'meta' ) {\n\t\t\t\t\tif ( result === attributes ) {\n\t\t\t\t\t\tresult = { ...result };\n\t\t\t\t\t}\n\n\t\t\t\t\tresult[ key ] = getPostMeta( state, value.meta );\n\t\t\t\t}\n\n\t\t\t\treturn result;\n\t\t\t}, attributes );\n\t\t}\n\n\t\treturn {\n\t\t\t...block,\n\t\t\tattributes,\n\t\t\tinnerBlocks: getBlocks( state, clientId ),\n\t\t};\n\t},\n\t( state, clientId ) => [\n\t\tstate.editor.present.blocks.byClientId[ clientId ],\n\t\tgetBlockDependantsCacheBust( state, clientId ),\n\t\tstate.editor.present.edits.meta,\n\t\tstate.currentPost.meta,\n\t]\n);\n\nfunction getPostMeta( state, key ) {\n\treturn has( state, [ 'editor', 'present', 'edits', 'meta', key ] ) ?\n\t\tget( state, [ 'editor', 'present', 'edits', 'meta', key ] ) :\n\t\tget( state, [ 'currentPost', 'meta', key ] );\n}\n\n/**\n * Returns all block objects for the current post being edited as an array in\n * the order they appear in the post.\n *\n * Note: It's important to memoize this selector to avoid return a new instance\n * on each call\n *\n * @param {Object}  state        Editor state.\n * @param {?String} rootClientId Optional root client ID of block list.\n *\n * @return {Object[]} Post blocks.\n */\nexport const getBlocks = createSelector(\n\t( state, rootClientId ) => {\n\t\treturn map(\n\t\t\tgetBlockOrder( state, rootClientId ),\n\t\t\t( clientId ) => getBlock( state, clientId )\n\t\t);\n\t},\n\t( state ) => [\n\t\tstate.editor.present.blocks,\n\t]\n);\n\n/**\n * Returns an array containing the clientIds of all descendants\n * of the blocks given.\n *\n * @param {Object} state Global application state.\n * @param {Array} clientIds Array of blocks to inspect.\n *\n * @return {Array} ids of descendants.\n */\nexport const getClientIdsOfDescendants = ( state, clientIds ) => flatMap( clientIds, ( clientId ) => {\n\tconst descendants = getBlockOrder( state, clientId );\n\treturn [ ...descendants, ...getClientIdsOfDescendants( state, descendants ) ];\n} );\n\n/**\n * Returns an array containing the clientIds of the top-level blocks\n * and their descendants of any depth (for nested blocks).\n *\n * @param {Object} state Global application state.\n *\n * @return {Array} ids of top-level and descendant blocks.\n */\nexport const getClientIdsWithDescendants = createSelector(\n\t( state ) => {\n\t\tconst topLevelIds = getBlockOrder( state );\n\t\treturn [ ...topLevelIds, ...getClientIdsOfDescendants( state, topLevelIds ) ];\n\t},\n\t( state ) => [\n\t\tstate.editor.present.blocks.order,\n\t]\n);\n\n/**\n * Returns the total number of blocks, or the total number of blocks with a specific name in a post.\n * The number returned includes nested blocks.\n *\n * @param {Object}  state     Global application state.\n * @param {?String} blockName Optional block name, if specified only blocks of that type will be counted.\n *\n * @return {number} Number of blocks in the post, or number of blocks with name equal to blockName.\n */\nexport const getGlobalBlockCount = createSelector(\n\t( state, blockName ) => {\n\t\tif ( ! blockName ) {\n\t\t\treturn size( state.editor.present.blocks.byClientId );\n\t\t}\n\t\treturn reduce(\n\t\t\tstate.editor.present.blocks.byClientId,\n\t\t\t( count, block ) => block.name === blockName ? count + 1 : count,\n\t\t\t0\n\t\t);\n\t},\n\t( state ) => [\n\t\tstate.editor.present.blocks.byClientId,\n\t]\n);\n\n/**\n * Given an array of block client IDs, returns the corresponding array of block\n * objects.\n *\n * @param {Object}   state     Editor state.\n * @param {string[]} clientIds Client IDs for which blocks are to be returned.\n *\n * @return {WPBlock[]} Block objects.\n */\nexport const getBlocksByClientId = createSelector(\n\t( state, clientIds ) => map(\n\t\tcastArray( clientIds ),\n\t\t( clientId ) => getBlock( state, clientId )\n\t),\n\t( state ) => [\n\t\tstate.editor.present.edits.meta,\n\t\tstate.currentPost.meta,\n\t\tstate.editor.present.blocks,\n\t]\n);\n\n/**\n * Returns the number of blocks currently present in the post.\n *\n * @param {Object}  state        Editor state.\n * @param {?string} rootClientId Optional root client ID of block list.\n *\n * @return {number} Number of blocks in the post.\n */\nexport function getBlockCount( state, rootClientId ) {\n\treturn getBlockOrder( state, rootClientId ).length;\n}\n\n/**\n * Returns the current block selection start. This value may be null, and it\n * may represent either a singular block selection or multi-selection start.\n * A selection is singular if its start and end match.\n *\n * @param {Object} state Global application state.\n *\n * @return {?string} Client ID of block selection start.\n */\nexport function getBlockSelectionStart( state ) {\n\treturn state.blockSelection.start;\n}\n\n/**\n * Returns the current block selection end. This value may be null, and it\n * may represent either a singular block selection or multi-selection end.\n * A selection is singular if its start and end match.\n *\n * @param {Object} state Global application state.\n *\n * @return {?string} Client ID of block selection end.\n */\nexport function getBlockSelectionEnd( state ) {\n\treturn state.blockSelection.end;\n}\n\n/**\n * Returns the number of blocks currently selected in the post.\n *\n * @param {Object} state Global application state.\n *\n * @return {number} Number of blocks selected in the post.\n */\nexport function getSelectedBlockCount( state ) {\n\tconst multiSelectedBlockCount = getMultiSelectedBlockClientIds( state ).length;\n\n\tif ( multiSelectedBlockCount ) {\n\t\treturn multiSelectedBlockCount;\n\t}\n\n\treturn state.blockSelection.start ? 1 : 0;\n}\n\n/**\n * Returns true if there is a single selected block, or false otherwise.\n *\n * @param {Object} state Editor state.\n *\n * @return {boolean} Whether a single block is selected.\n */\nexport function hasSelectedBlock( state ) {\n\tconst { start, end } = state.blockSelection;\n\treturn !! start && start === end;\n}\n\n/**\n * Returns the currently selected block client ID, or null if there is no\n * selected block.\n *\n * @param {Object} state Editor state.\n *\n * @return {?string} Selected block client ID.\n */\nexport function getSelectedBlockClientId( state ) {\n\tconst { start, end } = state.blockSelection;\n\treturn start === end && start ? start : null;\n}\n\n/**\n * Returns the currently selected block, or null if there is no selected block.\n *\n * @param {Object} state Global application state.\n *\n * @return {?Object} Selected block.\n */\nexport function getSelectedBlock( state ) {\n\tconst clientId = getSelectedBlockClientId( state );\n\treturn clientId ? getBlock( state, clientId ) : null;\n}\n\n/**\n * Given a block client ID, returns the root block from which the block is\n * nested, an empty string for top-level blocks, or null if the block does not\n * exist.\n *\n * @param {Object} state    Editor state.\n * @param {string} clientId Block from which to find root client ID.\n *\n * @return {?string} Root client ID, if exists\n */\nexport const getBlockRootClientId = createSelector(\n\t( state, clientId ) => {\n\t\tconst { order } = state.editor.present.blocks;\n\n\t\tfor ( const rootClientId in order ) {\n\t\t\tif ( includes( order[ rootClientId ], clientId ) ) {\n\t\t\t\treturn rootClientId;\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t},\n\t( state ) => [\n\t\tstate.editor.present.blocks.order,\n\t]\n);\n\n/**\n * Given a block client ID, returns the root of the hierarchy from which the block is nested, return the block itself for root level blocks.\n *\n * @param {Object} state    Editor state.\n * @param {string} clientId Block from which to find root client ID.\n *\n * @return {string} Root client ID\n */\nexport const getBlockHierarchyRootClientId = createSelector(\n\t( state, clientId ) => {\n\t\tlet rootClientId = clientId;\n\t\tlet current = clientId;\n\t\twhile ( rootClientId ) {\n\t\t\tcurrent = rootClientId;\n\t\t\trootClientId = getBlockRootClientId( state, current );\n\t\t}\n\n\t\treturn current;\n\t},\n\t( state ) => [\n\t\tstate.editor.present.blocks.order,\n\t]\n);\n\n/**\n * Returns the client ID of the block adjacent one at the given reference\n * startClientId and modifier directionality. Defaults start startClientId to\n * the selected block, and direction as next block. Returns null if there is no\n * adjacent block.\n *\n * @param {Object}  state         Editor state.\n * @param {?string} startClientId Optional client ID of block from which to\n *                                search.\n * @param {?number} modifier      Directionality multiplier (1 next, -1\n *                                previous).\n *\n * @return {?string} Return the client ID of the block, or null if none exists.\n */\nexport function getAdjacentBlockClientId( state, startClientId, modifier = 1 ) {\n\t// Default to selected block.\n\tif ( startClientId === undefined ) {\n\t\tstartClientId = getSelectedBlockClientId( state );\n\t}\n\n\t// Try multi-selection starting at extent based on modifier.\n\tif ( startClientId === undefined ) {\n\t\tif ( modifier < 0 ) {\n\t\t\tstartClientId = getFirstMultiSelectedBlockClientId( state );\n\t\t} else {\n\t\t\tstartClientId = getLastMultiSelectedBlockClientId( state );\n\t\t}\n\t}\n\n\t// Validate working start client ID.\n\tif ( ! startClientId ) {\n\t\treturn null;\n\t}\n\n\t// Retrieve start block root client ID, being careful to allow the falsey\n\t// empty string top-level root by explicitly testing against null.\n\tconst rootClientId = getBlockRootClientId( state, startClientId );\n\tif ( rootClientId === null ) {\n\t\treturn null;\n\t}\n\n\tconst { order } = state.editor.present.blocks;\n\tconst orderSet = order[ rootClientId ];\n\tconst index = orderSet.indexOf( startClientId );\n\tconst nextIndex = ( index + ( 1 * modifier ) );\n\n\t// Block was first in set and we're attempting to get previous.\n\tif ( nextIndex < 0 ) {\n\t\treturn null;\n\t}\n\n\t// Block was last in set and we're attempting to get next.\n\tif ( nextIndex === orderSet.length ) {\n\t\treturn null;\n\t}\n\n\t// Assume incremented index is within the set.\n\treturn orderSet[ nextIndex ];\n}\n\n/**\n * Returns the previous block's client ID from the given reference start ID.\n * Defaults start to the selected block. Returns null if there is no previous\n * block.\n *\n * @param {Object}  state         Editor state.\n * @param {?string} startClientId Optional client ID of block from which to\n *                                search.\n *\n * @return {?string} Adjacent block's client ID, or null if none exists.\n */\nexport function getPreviousBlockClientId( state, startClientId ) {\n\treturn getAdjacentBlockClientId( state, startClientId, -1 );\n}\n\n/**\n * Returns the next block's client ID from the given reference start ID.\n * Defaults start to the selected block. Returns null if there is no next\n * block.\n *\n * @param {Object}  state         Editor state.\n * @param {?string} startClientId Optional client ID of block from which to\n *                                search.\n *\n * @return {?string} Adjacent block's client ID, or null if none exists.\n */\nexport function getNextBlockClientId( state, startClientId ) {\n\treturn getAdjacentBlockClientId( state, startClientId, 1 );\n}\n\n/**\n * Returns the initial caret position for the selected block.\n * This position is to used to position the caret properly when the selected block changes.\n *\n * @param {Object} state Global application state.\n *\n * @return {?Object} Selected block.\n */\nexport function getSelectedBlocksInitialCaretPosition( state ) {\n\tconst { start, end } = state.blockSelection;\n\tif ( start !== end || ! start ) {\n\t\treturn null;\n\t}\n\n\treturn state.blockSelection.initialPosition;\n}\n\n/**\n * Returns the current multi-selection set of block client IDs, or an empty\n * array if there is no multi-selection.\n *\n * @param {Object} state Editor state.\n *\n * @return {Array} Multi-selected block client IDs.\n */\nexport const getMultiSelectedBlockClientIds = createSelector(\n\t( state ) => {\n\t\tconst { start, end } = state.blockSelection;\n\t\tif ( start === end ) {\n\t\t\treturn [];\n\t\t}\n\n\t\t// Retrieve root client ID to aid in retrieving relevant nested block\n\t\t// order, being careful to allow the falsey empty string top-level root\n\t\t// by explicitly testing against null.\n\t\tconst rootClientId = getBlockRootClientId( state, start );\n\t\tif ( rootClientId === null ) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst blockOrder = getBlockOrder( state, rootClientId );\n\t\tconst startIndex = blockOrder.indexOf( start );\n\t\tconst endIndex = blockOrder.indexOf( end );\n\n\t\tif ( startIndex > endIndex ) {\n\t\t\treturn blockOrder.slice( endIndex, startIndex + 1 );\n\t\t}\n\n\t\treturn blockOrder.slice( startIndex, endIndex + 1 );\n\t},\n\t( state ) => [\n\t\tstate.editor.present.blocks.order,\n\t\tstate.blockSelection.start,\n\t\tstate.blockSelection.end,\n\t],\n);\n\n/**\n * Returns the current multi-selection set of blocks, or an empty array if\n * there is no multi-selection.\n *\n * @param {Object} state Editor state.\n *\n * @return {Array} Multi-selected block objects.\n */\nexport const getMultiSelectedBlocks = createSelector(\n\t( state ) => {\n\t\tconst multiSelectedBlockClientIds = getMultiSelectedBlockClientIds( state );\n\t\tif ( ! multiSelectedBlockClientIds.length ) {\n\t\t\treturn EMPTY_ARRAY;\n\t\t}\n\n\t\treturn multiSelectedBlockClientIds.map( ( clientId ) => getBlock( state, clientId ) );\n\t},\n\t( state ) => [\n\t\tstate.editor.present.blocks.order,\n\t\tstate.blockSelection.start,\n\t\tstate.blockSelection.end,\n\t\tstate.editor.present.blocks.byClientId,\n\t\tstate.editor.present.edits.meta,\n\t\tstate.currentPost.meta,\n\t]\n);\n\n/**\n * Returns the client ID of the first block in the multi-selection set, or null\n * if there is no multi-selection.\n *\n * @param {Object} state Editor state.\n *\n * @return {?string} First block client ID in the multi-selection set.\n */\nexport function getFirstMultiSelectedBlockClientId( state ) {\n\treturn first( getMultiSelectedBlockClientIds( state ) ) || null;\n}\n\n/**\n * Returns the client ID of the last block in the multi-selection set, or null\n * if there is no multi-selection.\n *\n * @param {Object} state Editor state.\n *\n * @return {?string} Last block client ID in the multi-selection set.\n */\nexport function getLastMultiSelectedBlockClientId( state ) {\n\treturn last( getMultiSelectedBlockClientIds( state ) ) || null;\n}\n\n/**\n * Returns true if a multi-selection exists, and the block corresponding to the\n * specified client ID is the first block of the multi-selection set, or false\n * otherwise.\n *\n * @param {Object} state    Editor state.\n * @param {string} clientId Block client ID.\n *\n * @return {boolean} Whether block is first in multi-selection.\n */\nexport function isFirstMultiSelectedBlock( state, clientId ) {\n\treturn getFirstMultiSelectedBlockClientId( state ) === clientId;\n}\n\n/**\n * Returns true if the client ID occurs within the block multi-selection, or\n * false otherwise.\n *\n * @param {Object} state    Editor state.\n * @param {string} clientId Block client ID.\n *\n * @return {boolean} Whether block is in multi-selection set.\n */\nexport function isBlockMultiSelected( state, clientId ) {\n\treturn getMultiSelectedBlockClientIds( state ).indexOf( clientId ) !== -1;\n}\n\n/**\n * Returns true if an ancestor of the block is multi-selected, or false\n * otherwise.\n *\n * @param {Object} state    Editor state.\n * @param {string} clientId Block client ID.\n *\n * @return {boolean} Whether an ancestor of the block is in multi-selection\n *                   set.\n */\nexport const isAncestorMultiSelected = createSelector(\n\t( state, clientId ) => {\n\t\tlet ancestorClientId = clientId;\n\t\tlet isMultiSelected = false;\n\t\twhile ( ancestorClientId && ! isMultiSelected ) {\n\t\t\tancestorClientId = getBlockRootClientId( state, ancestorClientId );\n\t\t\tisMultiSelected = isBlockMultiSelected( state, ancestorClientId );\n\t\t}\n\t\treturn isMultiSelected;\n\t},\n\t( state ) => [\n\t\tstate.editor.present.blocks.order,\n\t\tstate.blockSelection.start,\n\t\tstate.blockSelection.end,\n\t],\n);\n/**\n * Returns the client ID of the block which begins the multi-selection set, or\n * null if there is no multi-selection.\n *\n * This is not necessarily the first client ID in the selection.\n *\n * @see getFirstMultiSelectedBlockClientId\n *\n * @param {Object} state Editor state.\n *\n * @return {?string} Client ID of block beginning multi-selection.\n */\nexport function getMultiSelectedBlocksStartClientId( state ) {\n\tconst { start, end } = state.blockSelection;\n\tif ( start === end ) {\n\t\treturn null;\n\t}\n\treturn start || null;\n}\n\n/**\n * Returns the client ID of the block which ends the multi-selection set, or\n * null if there is no multi-selection.\n *\n * This is not necessarily the last client ID in the selection.\n *\n * @see getLastMultiSelectedBlockClientId\n *\n * @param {Object} state Editor state.\n *\n * @return {?string} Client ID of block ending multi-selection.\n */\nexport function getMultiSelectedBlocksEndClientId( state ) {\n\tconst { start, end } = state.blockSelection;\n\tif ( start === end ) {\n\t\treturn null;\n\t}\n\treturn end || null;\n}\n\n/**\n * Returns an array containing all block client IDs in the editor in the order\n * they appear. Optionally accepts a root client ID of the block list for which\n * the order should be returned, defaulting to the top-level block order.\n *\n * @param {Object}  state        Editor state.\n * @param {?string} rootClientId Optional root client ID of block list.\n *\n * @return {Array} Ordered client IDs of editor blocks.\n */\nexport function getBlockOrder( state, rootClientId ) {\n\treturn state.editor.present.blocks.order[ rootClientId || '' ] || EMPTY_ARRAY;\n}\n\n/**\n * Returns the index at which the block corresponding to the specified client\n * ID occurs within the block order, or `-1` if the block does not exist.\n *\n * @param {Object}  state        Editor state.\n * @param {string}  clientId     Block client ID.\n * @param {?string} rootClientId Optional root client ID of block list.\n *\n * @return {number} Index at which block exists in order.\n */\nexport function getBlockIndex( state, clientId, rootClientId ) {\n\treturn getBlockOrder( state, rootClientId ).indexOf( clientId );\n}\n\n/**\n * Returns true if the block corresponding to the specified client ID is\n * currently selected and no multi-selection exists, or false otherwise.\n *\n * @param {Object} state    Editor state.\n * @param {string} clientId Block client ID.\n *\n * @return {boolean} Whether block is selected and multi-selection exists.\n */\nexport function isBlockSelected( state, clientId ) {\n\tconst { start, end } = state.blockSelection;\n\n\tif ( start !== end ) {\n\t\treturn false;\n\t}\n\n\treturn start === clientId;\n}\n\n/**\n * Returns true if one of the block's inner blocks is selected.\n *\n * @param {Object}  state    Editor state.\n * @param {string}  clientId Block client ID.\n * @param {boolean} deep     Perform a deep check.\n *\n * @return {boolean} Whether the block as an inner block selected\n */\nexport function hasSelectedInnerBlock( state, clientId, deep = false ) {\n\treturn some(\n\t\tgetBlockOrder( state, clientId ),\n\t\t( innerClientId ) => (\n\t\t\tisBlockSelected( state, innerClientId ) ||\n\t\t\tisBlockMultiSelected( state, innerClientId ) ||\n\t\t\t( deep && hasSelectedInnerBlock( state, innerClientId, deep ) )\n\t\t)\n\t);\n}\n\n/**\n * Returns true if the block corresponding to the specified client ID is\n * currently selected but isn't the last of the selected blocks. Here \"last\"\n * refers to the block sequence in the document, _not_ the sequence of\n * multi-selection, which is why `state.blockSelection.end` isn't used.\n *\n * @param {Object} state    Editor state.\n * @param {string} clientId Block client ID.\n *\n * @return {boolean} Whether block is selected and not the last in the\n *                   selection.\n */\nexport function isBlockWithinSelection( state, clientId ) {\n\tif ( ! clientId ) {\n\t\treturn false;\n\t}\n\n\tconst clientIds = getMultiSelectedBlockClientIds( state );\n\tconst index = clientIds.indexOf( clientId );\n\treturn index > -1 && index < clientIds.length - 1;\n}\n\n/**\n * Returns true if a multi-selection has been made, or false otherwise.\n *\n * @param {Object} state Editor state.\n *\n * @return {boolean} Whether multi-selection has been made.\n */\nexport function hasMultiSelection( state ) {\n\tconst { start, end } = state.blockSelection;\n\treturn start !== end;\n}\n\n/**\n * Whether in the process of multi-selecting or not. This flag is only true\n * while the multi-selection is being selected (by mouse move), and is false\n * once the multi-selection has been settled.\n *\n * @see hasMultiSelection\n *\n * @param {Object} state Global application state.\n *\n * @return {boolean} True if multi-selecting, false if not.\n */\nexport function isMultiSelecting( state ) {\n\treturn state.blockSelection.isMultiSelecting;\n}\n\n/**\n * Whether is selection disable or not.\n *\n * @param {Object} state Global application state.\n *\n * @return {boolean} True if multi is disable, false if not.\n */\nexport function isSelectionEnabled( state ) {\n\treturn state.blockSelection.isEnabled;\n}\n\n/**\n * Returns the block's editing mode, defaulting to \"visual\" if not explicitly\n * assigned.\n *\n * @param {Object} state    Editor state.\n * @param {string} clientId Block client ID.\n *\n * @return {Object} Block editing mode.\n */\nexport function getBlockMode( state, clientId ) {\n\treturn state.blocksMode[ clientId ] || 'visual';\n}\n\n/**\n * Returns true if the user is typing, or false otherwise.\n *\n * @param {Object} state Global application state.\n *\n * @return {boolean} Whether user is typing.\n */\nexport function isTyping( state ) {\n\treturn state.isTyping;\n}\n\n/**\n * Returns true if the caret is within formatted text, or false otherwise.\n *\n * @param {Object} state Global application state.\n *\n * @return {boolean} Whether the caret is within formatted text.\n */\nexport function isCaretWithinFormattedText( state ) {\n\treturn state.isCaretWithinFormattedText;\n}\n\n/**\n * Returns the insertion point, the index at which the new inserted block would\n * be placed. Defaults to the last index.\n *\n * @param {Object} state Editor state.\n *\n * @return {Object} Insertion point object with `rootClientId`, `index`.\n */\nexport function getBlockInsertionPoint( state ) {\n\tlet rootClientId, index;\n\n\tconst { insertionPoint, blockSelection } = state;\n\tif ( insertionPoint !== null ) {\n\t\treturn insertionPoint;\n\t}\n\n\tconst { end } = blockSelection;\n\tif ( end ) {\n\t\trootClientId = getBlockRootClientId( state, end ) || undefined;\n\t\tindex = getBlockIndex( state, end, rootClientId ) + 1;\n\t} else {\n\t\tindex = getBlockOrder( state ).length;\n\t}\n\n\treturn { rootClientId, index };\n}\n\n/**\n * Returns true if we should show the block insertion point.\n *\n * @param {Object} state Global application state.\n *\n * @return {?boolean} Whether the insertion point is visible or not.\n */\nexport function isBlockInsertionPointVisible( state ) {\n\treturn state.insertionPoint !== null;\n}\n\n/**\n * Returns whether the blocks matches the template or not.\n *\n * @param {boolean} state\n * @return {?boolean} Whether the template is valid or not.\n */\nexport function isValidTemplate( state ) {\n\treturn state.template.isValid;\n}\n\n/**\n * Returns the defined block template\n *\n * @param {boolean} state\n * @return {?Array}        Block Template\n */\nexport function getTemplate( state ) {\n\treturn state.settings.template;\n}\n\n/**\n * Returns the defined block template lock. Optionally accepts a root block\n * client ID as context, otherwise defaulting to the global context.\n *\n * @param {Object}  state        Editor state.\n * @param {?string} rootClientId Optional block root client ID.\n *\n * @return {?string} Block Template Lock\n */\nexport function getTemplateLock( state, rootClientId ) {\n\tif ( ! rootClientId ) {\n\t\treturn state.settings.templateLock;\n\t}\n\n\tconst blockListSettings = getBlockListSettings( state, rootClientId );\n\tif ( ! blockListSettings ) {\n\t\treturn null;\n\t}\n\n\treturn blockListSettings.templateLock;\n}\n\n/**\n * Returns true if the post is currently being saved, or false otherwise.\n *\n * @param {Object} state Global application state.\n *\n * @return {boolean} Whether post is being saved.\n */\nexport function isSavingPost( state ) {\n\treturn state.saving.requesting;\n}\n\n/**\n * Returns true if a previous post save was attempted successfully, or false\n * otherwise.\n *\n * @param {Object} state Global application state.\n *\n * @return {boolean} Whether the post was saved successfully.\n */\nexport function didPostSaveRequestSucceed( state ) {\n\treturn state.saving.successful;\n}\n\n/**\n * Returns true if a previous post save was attempted but failed, or false\n * otherwise.\n *\n * @param {Object} state Global application state.\n *\n * @return {boolean} Whether the post save failed.\n */\nexport function didPostSaveRequestFail( state ) {\n\treturn !! state.saving.error;\n}\n\n/**\n * Returns true if the post is autosaving, or false otherwise.\n *\n * @param {Object} state Global application state.\n *\n * @return {boolean} Whether the post is autosaving.\n */\nexport function isAutosavingPost( state ) {\n\treturn isSavingPost( state ) && state.saving.isAutosave;\n}\n\n/**\n * Returns a suggested post format for the current post, inferred only if there\n * is a single block within the post and it is of a type known to match a\n * default post format. Returns null if the format cannot be determined.\n *\n * @param {Object} state Global application state.\n *\n * @return {?string} Suggested post format.\n */\nexport function getSuggestedPostFormat( state ) {\n\tconst blocks = getBlockOrder( state );\n\n\tlet name;\n\t// If there is only one block in the content of the post grab its name\n\t// so we can derive a suitable post format from it.\n\tif ( blocks.length === 1 ) {\n\t\tname = getBlock( state, blocks[ 0 ] ).name;\n\t}\n\n\t// If there are two blocks in the content and the last one is a text blocks\n\t// grab the name of the first one to also suggest a post format from it.\n\tif ( blocks.length === 2 ) {\n\t\tif ( getBlock( state, blocks[ 1 ] ).name === 'core/paragraph' ) {\n\t\t\tname = getBlock( state, blocks[ 0 ] ).name;\n\t\t}\n\t}\n\n\t// We only convert to default post formats in core.\n\tswitch ( name ) {\n\t\tcase 'core/image':\n\t\t\treturn 'image';\n\t\tcase 'core/quote':\n\t\tcase 'core/pullquote':\n\t\t\treturn 'quote';\n\t\tcase 'core/gallery':\n\t\t\treturn 'gallery';\n\t\tcase 'core/video':\n\t\tcase 'core-embed/youtube':\n\t\tcase 'core-embed/vimeo':\n\t\t\treturn 'video';\n\t\tcase 'core/audio':\n\t\tcase 'core-embed/spotify':\n\t\tcase 'core-embed/soundcloud':\n\t\t\treturn 'audio';\n\t}\n\n\treturn null;\n}\n\n/**\n * Returns a set of blocks which are to be used in consideration of the post's\n * generated save content.\n *\n * @param {Object} state Editor state.\n *\n * @return {WPBlock[]} Filtered set of blocks for save.\n */\nexport function getBlocksForSerialization( state ) {\n\tconst blocks = getBlocks( state );\n\n\t// A single unmodified default block is assumed to be equivalent to an\n\t// empty post.\n\tconst isSingleUnmodifiedDefaultBlock = (\n\t\tblocks.length === 1 &&\n\t\tisUnmodifiedDefaultBlock( blocks[ 0 ] )\n\t);\n\n\tif ( isSingleUnmodifiedDefaultBlock ) {\n\t\treturn [];\n\t}\n\n\treturn blocks;\n}\n\n/**\n * Returns the content of the post being edited, preferring raw string edit\n * before falling back to serialization of block state.\n *\n * @param {Object} state Global application state.\n *\n * @return {string} Post content.\n */\nexport const getEditedPostContent = createSelector(\n\t( state ) => {\n\t\tconst edits = getPostEdits( state );\n\t\tif ( 'content' in edits ) {\n\t\t\treturn edits.content;\n\t\t}\n\n\t\tconst blocks = getBlocksForSerialization( state );\n\t\tconst content = serialize( blocks );\n\n\t\t// For compatibility purposes, treat a post consisting of a single\n\t\t// freeform block as legacy content and downgrade to a pre-block-editor\n\t\t// removep'd content format.\n\t\tconst isSingleFreeformBlock = (\n\t\t\tblocks.length === 1 &&\n\t\t\tblocks[ 0 ].name === getFreeformContentHandlerName()\n\t\t);\n\n\t\tif ( isSingleFreeformBlock ) {\n\t\t\treturn removep( content );\n\t\t}\n\n\t\treturn content;\n\t},\n\t( state ) => [\n\t\tstate.editor.present.edits.content,\n\t\tstate.editor.present.blocks,\n\t],\n);\n\n/**\n * Determines if the given block type is allowed to be inserted into the block list.\n *\n * @param {Object}  state        Editor state.\n * @param {string}  blockName    The name of the block type, e.g.' core/paragraph'.\n * @param {?string} rootClientId Optional root client ID of block list.\n *\n * @return {boolean} Whether the given block type is allowed to be inserted.\n */\nexport const canInsertBlockType = createSelector(\n\t( state, blockName, rootClientId = null ) => {\n\t\tconst checkAllowList = ( list, item, defaultResult = null ) => {\n\t\t\tif ( isBoolean( list ) ) {\n\t\t\t\treturn list;\n\t\t\t}\n\t\t\tif ( isArray( list ) ) {\n\t\t\t\treturn includes( list, item );\n\t\t\t}\n\t\t\treturn defaultResult;\n\t\t};\n\n\t\tconst blockType = getBlockType( blockName );\n\t\tif ( ! blockType ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst { allowedBlockTypes } = getEditorSettings( state );\n\n\t\tconst isBlockAllowedInEditor = checkAllowList( allowedBlockTypes, blockName, true );\n\t\tif ( ! isBlockAllowedInEditor ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst isLocked = !! getTemplateLock( state, rootClientId );\n\t\tif ( isLocked ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst parentBlockListSettings = getBlockListSettings( state, rootClientId );\n\t\tconst parentAllowedBlocks = get( parentBlockListSettings, [ 'allowedBlocks' ] );\n\t\tconst hasParentAllowedBlock = checkAllowList( parentAllowedBlocks, blockName );\n\n\t\tconst blockAllowedParentBlocks = blockType.parent;\n\t\tconst parentName = getBlockName( state, rootClientId );\n\t\tconst hasBlockAllowedParent = checkAllowList( blockAllowedParentBlocks, parentName );\n\n\t\tif ( hasParentAllowedBlock !== null && hasBlockAllowedParent !== null ) {\n\t\t\treturn hasParentAllowedBlock || hasBlockAllowedParent;\n\t\t} else if ( hasParentAllowedBlock !== null ) {\n\t\t\treturn hasParentAllowedBlock;\n\t\t} else if ( hasBlockAllowedParent !== null ) {\n\t\t\treturn hasBlockAllowedParent;\n\t\t}\n\n\t\treturn true;\n\t},\n\t( state, blockName, rootClientId ) => [\n\t\tstate.blockListSettings[ rootClientId ],\n\t\tstate.editor.present.blocks.byClientId[ rootClientId ],\n\t\tstate.settings.allowedBlockTypes,\n\t\tstate.settings.templateLock,\n\t],\n);\n\n/**\n * Returns information about how recently and frequently a block has been inserted.\n *\n * @param {Object} state Global application state.\n * @param {string} id    A string which identifies the insert, e.g. 'core/block/12'\n *\n * @return {?{ time: number, count: number }} An object containing `time` which is when the last\n *                                            insert occured as a UNIX epoch, and `count` which is\n *                                            the number of inserts that have occurred.\n */\nfunction getInsertUsage( state, id ) {\n\treturn state.preferences.insertUsage[ id ] || null;\n}\n\n/**\n * Determines the items that appear in the inserter. Includes both static\n * items (e.g. a regular block type) and dynamic items (e.g. a reusable block).\n *\n * Each item object contains what's necessary to display a button in the\n * inserter and handle its selection.\n *\n * The 'utility' property indicates how useful we think an item will be to the\n * user. There are 4 levels of utility:\n *\n * 1. Blocks that are contextually useful (utility = 3)\n * 2. Blocks that have been previously inserted (utility = 2)\n * 3. Blocks that are in the common category (utility = 1)\n * 4. All other blocks (utility = 0)\n *\n * The 'frecency' property is a heuristic (https://en.wikipedia.org/wiki/Frecency)\n * that combines block usage frequenty and recency.\n *\n * Items are returned ordered descendingly by their 'utility' and 'frecency'.\n *\n * @param {Object}  state        Editor state.\n * @param {?string} rootClientId Optional root client ID of block list.\n *\n * @return {Editor.InserterItem[]} Items that appear in inserter.\n *\n * @typedef {Object} Editor.InserterItem\n * @property {string}   id                Unique identifier for the item.\n * @property {string}   name              The type of block to create.\n * @property {Object}   initialAttributes Attributes to pass to the newly created block.\n * @property {string}   title             Title of the item, as it appears in the inserter.\n * @property {string}   icon              Dashicon for the item, as it appears in the inserter.\n * @property {string}   category          Block category that the item is associated with.\n * @property {string[]} keywords          Keywords that can be searched to find this item.\n * @property {boolean}  isDisabled        Whether or not the user should be prevented from inserting\n *                                        this item.\n * @property {number}   utility           How useful we think this item is, between 0 and 3.\n * @property {number}   frecency          Hueristic that combines frequency and recency.\n */\nexport const getInserterItems = createSelector(\n\t( state, rootClientId = null ) => {\n\t\tconst calculateUtility = ( category, count, isContextual ) => {\n\t\t\tif ( isContextual ) {\n\t\t\t\treturn INSERTER_UTILITY_HIGH;\n\t\t\t} else if ( count > 0 ) {\n\t\t\t\treturn INSERTER_UTILITY_MEDIUM;\n\t\t\t} else if ( category === 'common' ) {\n\t\t\t\treturn INSERTER_UTILITY_LOW;\n\t\t\t}\n\t\t\treturn INSERTER_UTILITY_NONE;\n\t\t};\n\n\t\tconst calculateFrecency = ( time, count ) => {\n\t\t\tif ( ! time ) {\n\t\t\t\treturn count;\n\t\t\t}\n\n\t\t\t// The selector is cached, which means Date.now() is the last time that the\n\t\t\t// relevant state changed. This suits our needs.\n\t\t\tconst duration = Date.now() - time;\n\n\t\t\tswitch ( true ) {\n\t\t\t\tcase duration < MILLISECONDS_PER_HOUR:\n\t\t\t\t\treturn count * 4;\n\t\t\t\tcase duration < MILLISECONDS_PER_DAY:\n\t\t\t\t\treturn count * 2;\n\t\t\t\tcase duration < MILLISECONDS_PER_WEEK:\n\t\t\t\t\treturn count / 2;\n\t\t\t\tdefault:\n\t\t\t\t\treturn count / 4;\n\t\t\t}\n\t\t};\n\n\t\tconst shouldIncludeBlockType = ( blockType ) => {\n\t\t\tif ( ! hasBlockSupport( blockType, 'inserter', true ) ) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn canInsertBlockType( state, blockType.name, rootClientId );\n\t\t};\n\n\t\tconst buildBlockTypeInserterItem = ( blockType ) => {\n\t\t\tconst id = blockType.name;\n\n\t\t\tlet isDisabled = false;\n\t\t\tif ( ! hasBlockSupport( blockType.name, 'multiple', true ) ) {\n\t\t\t\tisDisabled = some( getBlocksByClientId( state, getClientIdsWithDescendants( state ) ), { name: blockType.name } );\n\t\t\t}\n\n\t\t\tconst isContextual = isArray( blockType.parent );\n\t\t\tconst { time, count = 0 } = getInsertUsage( state, id ) || {};\n\n\t\t\treturn {\n\t\t\t\tid,\n\t\t\t\tname: blockType.name,\n\t\t\t\tinitialAttributes: {},\n\t\t\t\ttitle: blockType.title,\n\t\t\t\ticon: blockType.icon,\n\t\t\t\tcategory: blockType.category,\n\t\t\t\tkeywords: blockType.keywords,\n\t\t\t\tisDisabled,\n\t\t\t\tutility: calculateUtility( blockType.category, count, isContextual ),\n\t\t\t\tfrecency: calculateFrecency( time, count ),\n\t\t\t\thasChildBlocksWithInserterSupport: hasChildBlocksWithInserterSupport( blockType.name ),\n\t\t\t};\n\t\t};\n\n\t\tconst shouldIncludeReusableBlock = ( reusableBlock ) => {\n\t\t\tif ( ! canInsertBlockType( state, 'core/block', rootClientId ) ) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tconst referencedBlock = getBlock( state, reusableBlock.clientId );\n\t\t\tif ( ! referencedBlock ) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tconst referencedBlockType = getBlockType( referencedBlock.name );\n\t\t\tif ( ! referencedBlockType ) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif ( ! canInsertBlockType( state, referencedBlockType.name, rootClientId ) ) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn true;\n\t\t};\n\n\t\tconst buildReusableBlockInserterItem = ( reusableBlock ) => {\n\t\t\tconst id = `core/block/${ reusableBlock.id }`;\n\n\t\t\tconst referencedBlock = getBlock( state, reusableBlock.clientId );\n\t\t\tconst referencedBlockType = getBlockType( referencedBlock.name );\n\n\t\t\tconst { time, count = 0 } = getInsertUsage( state, id ) || {};\n\t\t\tconst utility = calculateUtility( 'reusable', count, false );\n\t\t\tconst frecency = calculateFrecency( time, count );\n\n\t\t\treturn {\n\t\t\t\tid,\n\t\t\t\tname: 'core/block',\n\t\t\t\tinitialAttributes: { ref: reusableBlock.id },\n\t\t\t\ttitle: reusableBlock.title,\n\t\t\t\ticon: referencedBlockType.icon,\n\t\t\t\tcategory: 'reusable',\n\t\t\t\tkeywords: [],\n\t\t\t\tisDisabled: false,\n\t\t\t\tutility,\n\t\t\t\tfrecency,\n\t\t\t};\n\t\t};\n\n\t\tconst blockTypeInserterItems = getBlockTypes()\n\t\t\t.filter( shouldIncludeBlockType )\n\t\t\t.map( buildBlockTypeInserterItem );\n\n\t\tconst reusableBlockInserterItems = __experimentalGetReusableBlocks( state )\n\t\t\t.filter( shouldIncludeReusableBlock )\n\t\t\t.map( buildReusableBlockInserterItem );\n\n\t\treturn orderBy(\n\t\t\t[ ...blockTypeInserterItems, ...reusableBlockInserterItems ],\n\t\t\t[ 'utility', 'frecency' ],\n\t\t\t[ 'desc', 'desc' ]\n\t\t);\n\t},\n\t( state, rootClientId ) => [\n\t\tstate.blockListSettings[ rootClientId ],\n\t\tstate.editor.present.blocks,\n\t\tstate.preferences.insertUsage,\n\t\tstate.settings.allowedBlockTypes,\n\t\tstate.settings.templateLock,\n\t\tstate.reusableBlocks.data,\n\t\tgetBlockTypes(),\n\t],\n);\n\n/**\n * Returns the reusable block with the given ID.\n *\n * @param {Object}        state Global application state.\n * @param {number|string} ref   The reusable block's ID.\n *\n * @return {Object} The reusable block, or null if none exists.\n */\nexport const __experimentalGetReusableBlock = createSelector(\n\t( state, ref ) => {\n\t\tconst block = state.reusableBlocks.data[ ref ];\n\t\tif ( ! block ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst isTemporary = isNaN( parseInt( ref ) );\n\n\t\treturn {\n\t\t\t...block,\n\t\t\tid: isTemporary ? ref : +ref,\n\t\t\tisTemporary,\n\t\t};\n\t},\n\t( state, ref ) => [\n\t\tstate.reusableBlocks.data[ ref ],\n\t],\n);\n\n/**\n * Returns whether or not the reusable block with the given ID is being saved.\n *\n * @param {Object} state Global application state.\n * @param {string} ref   The reusable block's ID.\n *\n * @return {boolean} Whether or not the reusable block is being saved.\n */\nexport function __experimentalIsSavingReusableBlock( state, ref ) {\n\treturn state.reusableBlocks.isSaving[ ref ] || false;\n}\n\n/**\n * Returns true if the reusable block with the given ID is being fetched, or\n * false otherwise.\n *\n * @param {Object} state Global application state.\n * @param {string} ref   The reusable block's ID.\n *\n * @return {boolean} Whether the reusable block is being fetched.\n */\nexport function __experimentalIsFetchingReusableBlock( state, ref ) {\n\treturn !! state.reusableBlocks.isFetching[ ref ];\n}\n\n/**\n * Returns an array of all reusable blocks.\n *\n * @param {Object} state Global application state.\n *\n * @return {Array} An array of all reusable blocks.\n */\nexport function __experimentalGetReusableBlocks( state ) {\n\treturn map(\n\t\tstate.reusableBlocks.data,\n\t\t( value, ref ) => __experimentalGetReusableBlock( state, ref )\n\t);\n}\n\n/**\n * Returns state object prior to a specified optimist transaction ID, or `null`\n * if the transaction corresponding to the given ID cannot be found.\n *\n * @param {Object} state         Current global application state.\n * @param {Object} transactionId Optimist transaction ID.\n *\n * @return {Object} Global application state prior to transaction.\n */\nexport function getStateBeforeOptimisticTransaction( state, transactionId ) {\n\tconst transaction = find( state.optimist, ( entry ) => (\n\t\tentry.beforeState &&\n\t\tget( entry.action, [ 'optimist', 'id' ] ) === transactionId\n\t) );\n\n\treturn transaction ? transaction.beforeState : null;\n}\n\n/**\n * Returns true if the post is being published, or false otherwise.\n *\n * @param {Object} state Global application state.\n *\n * @return {boolean} Whether post is being published.\n */\nexport function isPublishingPost( state ) {\n\tif ( ! isSavingPost( state ) ) {\n\t\treturn false;\n\t}\n\n\t// Saving is optimistic, so assume that current post would be marked as\n\t// published if publishing\n\tif ( ! isCurrentPostPublished( state ) ) {\n\t\treturn false;\n\t}\n\n\t// Use post update transaction ID to retrieve the state prior to the\n\t// optimistic transaction\n\tconst stateBeforeRequest = getStateBeforeOptimisticTransaction(\n\t\tstate,\n\t\tPOST_UPDATE_TRANSACTION_ID\n\t);\n\n\t// Consider as publishing when current post prior to request was not\n\t// considered published\n\treturn !! stateBeforeRequest && ! isCurrentPostPublished( stateBeforeRequest );\n}\n\n/**\n * Returns whether the permalink is editable or not.\n *\n * @param {Object} state Editor state.\n *\n * @return {boolean} Whether or not the permalink is editable.\n */\nexport function isPermalinkEditable( state ) {\n\tconst permalinkTemplate = getEditedPostAttribute( state, 'permalink_template' );\n\n\treturn PERMALINK_POSTNAME_REGEX.test( permalinkTemplate );\n}\n\n/**\n * Returns the permalink for the post.\n *\n * @param {Object} state Editor state.\n *\n * @return {string} The permalink.\n */\nexport function getPermalink( state ) {\n\tconst { prefix, postName, suffix } = getPermalinkParts( state );\n\n\tif ( isPermalinkEditable( state ) ) {\n\t\treturn prefix + postName + suffix;\n\t}\n\n\treturn prefix;\n}\n\n/**\n * Returns the permalink for a post, split into it's three parts: the prefix, the postName, and the suffix.\n *\n * @param {Object} state Editor state.\n *\n * @return {Object} The prefix, postName, and suffix for the permalink.\n */\nexport function getPermalinkParts( state ) {\n\tconst permalinkTemplate = getEditedPostAttribute( state, 'permalink_template' );\n\tconst postName = getEditedPostAttribute( state, 'slug' ) || getEditedPostAttribute( state, 'generated_slug' );\n\n\tconst [ prefix, suffix ] = permalinkTemplate.split( PERMALINK_POSTNAME_REGEX );\n\n\treturn {\n\t\tprefix,\n\t\tpostName,\n\t\tsuffix,\n\t};\n}\n\n/**\n * Returns true if an optimistic transaction is pending commit, for which the\n * before state satisfies the given predicate function.\n *\n * @param {Object}   state     Editor state.\n * @param {Function} predicate Function given state, returning true if match.\n *\n * @return {boolean} Whether predicate matches for some history.\n */\nexport function inSomeHistory( state, predicate ) {\n\tconst { optimist } = state;\n\n\t// In recursion, optimist state won't exist. Assume exhausted options.\n\tif ( ! optimist ) {\n\t\treturn false;\n\t}\n\n\treturn optimist.some( ( { beforeState } ) => (\n\t\tbeforeState && predicate( beforeState )\n\t) );\n}\n\n/**\n * Returns the Block List settings of a block, if any exist.\n *\n * @param {Object}  state    Editor state.\n * @param {?string} clientId Block client ID.\n *\n * @return {?Object} Block settings of the block if set.\n */\nexport function getBlockListSettings( state, clientId ) {\n\treturn state.blockListSettings[ clientId ];\n}\n\n/**\n * Returns the editor settings.\n *\n * @param {Object} state Editor state.\n *\n * @return {Object} The editor settings object.\n */\nexport function getEditorSettings( state ) {\n\treturn state.settings;\n}\n\n/**\n * Returns the token settings.\n *\n * @param {Object} state Editor state.\n * @param {?string} name Token name.\n *\n * @return {Object} Token settings object, or the named token settings object if set.\n */\nexport function getTokenSettings( state, name ) {\n\tif ( ! name ) {\n\t\treturn state.tokens;\n\t}\n\n\treturn state.tokens[ name ];\n}\n\n/**\n * Returns whether the post is locked.\n *\n * @param {Object} state Global application state.\n *\n * @return {boolean} Is locked.\n */\nexport function isPostLocked( state ) {\n\treturn state.postLock.isLocked;\n}\n\n/**\n * Returns whether post saving is locked.\n *\n * @param {Object} state Global application state.\n *\n * @return {boolean} Is locked.\n */\nexport function isPostSavingLocked( state ) {\n\treturn state.postSavingLock.length > 0;\n}\n\n/**\n * Returns whether the edition of the post has been taken over.\n *\n * @param {Object} state Global application state.\n *\n * @return {boolean} Is post lock takeover.\n */\nexport function isPostLockTakeover( state ) {\n\treturn state.postLock.isTakeover;\n}\n\n/**\n * Returns details about the post lock user.\n *\n * @param {Object} state Global application state.\n *\n * @return {Object} A user object.\n */\nexport function getPostLockUser( state ) {\n\treturn state.postLock.user;\n}\n\n/**\n * Returns the active post lock.\n *\n * @param {Object} state Global application state.\n *\n * @return {Object} The lock object.\n */\nexport function getActivePostLock( state ) {\n\treturn state.postLock.activePostLock;\n}\n\n/**\n * Returns whether or not the user has the unfiltered_html capability.\n *\n * @param {Object} state Editor state.\n *\n * @return {boolean} Whether the user can or can't post unfiltered HTML.\n */\nexport function canUserUseUnfilteredHTML( state ) {\n\treturn has( getCurrentPost( state ), [ '_links', 'wp:action-unfiltered-html' ] );\n}\n\n/**\n * Returns whether the pre-publish panel should be shown\n * or skipped when the user clicks the \"publish\" button.\n *\n * @param {Object} state Global application state.\n *\n * @return {boolean} Whether the pre-publish panel should be shown or not.\n */\nexport function isPublishSidebarEnabled( state ) {\n\tif ( state.preferences.hasOwnProperty( 'isPublishSidebarEnabled' ) ) {\n\t\treturn state.preferences.isPublishSidebarEnabled;\n\t}\n\treturn PREFERENCES_DEFAULTS.isPublishSidebarEnabled;\n}\n\n//\n// Deprecated\n//\n\nexport function getNotices() {\n\tdeprecated( 'getNotices selector (`core/editor` store)', {\n\t\talternative: 'getNotices selector (`core/notices` store)',\n\t\tplugin: 'Gutenberg',\n\t\tversion: '4.4.0',\n\t} );\n\n\treturn select( 'core/notices' ).getNotices();\n}\n\nexport function getReusableBlock( state, ref ) {\n\tdeprecated( \"wp.data.select( 'core/editor' ).getReusableBlock( ref )\", {\n\t\talternative: \"wp.data.select( 'core' ).getEntityRecord( 'postType', 'wp_block', ref )\",\n\t\tplugin: 'Gutenberg',\n\t\tversion: '4.4.0',\n\t} );\n\n\treturn __experimentalGetReusableBlock( state, ref );\n}\n\nexport function isSavingReusableBlock( state, ref ) {\n\tdeprecated( 'isSavingReusableBlock selector (`core/editor` store)', {\n\t\talternative: '__experimentalIsSavingReusableBlock selector (`core/edtior` store)',\n\t\tplugin: 'Gutenberg',\n\t\tversion: '4.4.0',\n\t\thint: 'Using experimental APIs is strongly discouraged as they are subject to removal without notice.',\n\t} );\n\n\treturn __experimentalIsSavingReusableBlock( state, ref );\n}\n\nexport function isFetchingReusableBlock( state, ref ) {\n\tdeprecated( \"wp.data.select( 'core/editor' ).isFetchingReusableBlock( ref )\", {\n\t\talternative: \"wp.data.select( 'core' ).isResolving( 'getEntityRecord', 'wp_block', ref )\",\n\t\tplugin: 'Gutenberg',\n\t\tversion: '4.4.0',\n\t} );\n\n\treturn __experimentalIsFetchingReusableBlock( state, ref );\n}\n\nexport function getReusableBlocks( state ) {\n\tdeprecated( \"wp.data.select( 'core/editor' ).getReusableBlocks( ref )\", {\n\t\talternative: \"wp.data.select( 'core' ).getEntityRecords( 'postType', 'wp_block' )\",\n\t\tplugin: 'Gutenberg',\n\t\tversion: '4.4.0',\n\t} );\n\n\treturn __experimentalGetReusableBlocks( state );\n}\n"]}