{"version":3,"sources":["/Users/ky/Sites/valet/copesacontent/web/app/plugins/gutenberg/packages/components/src/navigable-container/index.js"],"names":["omit","noop","includes","Component","focus","UP","DOWN","LEFT","RIGHT","TAB","cycleValue","value","total","offset","nextValue","NavigableContainer","arguments","bindContainer","bind","onKeyDown","getFocusableContext","getFocusableIndex","ref","container","target","onlyBrowserTabstops","props","finder","tabbable","focusable","focusables","find","index","directIndex","indexOf","event","cycle","eventToOffset","onNavigate","stopNavigationEvents","undefined","nativeEvent","stopImmediatePropagation","getAttribute","preventDefault","stopPropagation","context","document","activeElement","nextIndex","length","children","onFocus","NavigableMenu","role","orientation","rest","evt","keyCode","next","previous","TabbableContainer","shiftKey"],"mappings":"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","sourcesContent":["/**\n * External Dependencies\n */\nimport { omit, noop, includes } from 'lodash';\n\n/**\n * WordPress Dependencies\n */\nimport { Component } from '@wordpress/element';\nimport { focus } from '@wordpress/dom';\nimport { UP, DOWN, LEFT, RIGHT, TAB } from '@wordpress/keycodes';\n\nfunction cycleValue( value, total, offset ) {\n\tconst nextValue = value + offset;\n\tif ( nextValue < 0 ) {\n\t\treturn total + nextValue;\n\t} else if ( nextValue >= total ) {\n\t\treturn nextValue - total;\n\t}\n\n\treturn nextValue;\n}\n\nclass NavigableContainer extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\t\tthis.bindContainer = this.bindContainer.bind( this );\n\t\tthis.onKeyDown = this.onKeyDown.bind( this );\n\n\t\tthis.getFocusableContext = this.getFocusableContext.bind( this );\n\t\tthis.getFocusableIndex = this.getFocusableIndex.bind( this );\n\t}\n\n\tbindContainer( ref ) {\n\t\tthis.container = ref;\n\t}\n\n\tgetFocusableContext( target ) {\n\t\tconst { onlyBrowserTabstops } = this.props;\n\t\tconst finder = onlyBrowserTabstops ? focus.tabbable : focus.focusable;\n\t\tconst focusables = finder.find( this.container );\n\n\t\tconst index = this.getFocusableIndex( focusables, target );\n\t\tif ( index > -1 && target ) {\n\t\t\treturn { index, target, focusables };\n\t\t}\n\t\treturn null;\n\t}\n\n\tgetFocusableIndex( focusables, target ) {\n\t\tconst directIndex = focusables.indexOf( target );\n\t\tif ( directIndex !== -1 ) {\n\t\t\treturn directIndex;\n\t\t}\n\t}\n\n\tonKeyDown( event ) {\n\t\tif ( this.props.onKeyDown ) {\n\t\t\tthis.props.onKeyDown( event );\n\t\t}\n\n\t\tconst { getFocusableContext } = this;\n\t\tconst { cycle = true, eventToOffset, onNavigate = noop, stopNavigationEvents } = this.props;\n\n\t\tconst offset = eventToOffset( event );\n\n\t\t// eventToOffset returns undefined if the event is not handled by the component\n\t\tif ( offset !== undefined && stopNavigationEvents ) {\n\t\t\t// Prevents arrow key handlers bound to the document directly interfering\n\t\t\tevent.nativeEvent.stopImmediatePropagation();\n\n\t\t\t// When navigating a collection of items, prevent scroll containers\n\t\t\t// from scrolling.\n\t\t\tif ( event.target.getAttribute( 'role' ) === 'menuitem' ) {\n\t\t\t\tevent.preventDefault();\n\t\t\t}\n\n\t\t\tevent.stopPropagation();\n\t\t}\n\n\t\tif ( ! offset ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst context = getFocusableContext( document.activeElement );\n\t\tif ( ! context ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst { index, focusables } = context;\n\t\tconst nextIndex = cycle ? cycleValue( index, focusables.length, offset ) : index + offset;\n\t\tif ( nextIndex >= 0 && nextIndex < focusables.length ) {\n\t\t\tfocusables[ nextIndex ].focus();\n\t\t\tonNavigate( nextIndex, focusables[ nextIndex ] );\n\t\t}\n\t}\n\n\trender() {\n\t\tconst { children, ...props } = this.props;\n\n\t\t// Disable reason: Assumed role is applied by parent via props spread.\n\t\t/* eslint-disable jsx-a11y/no-static-element-interactions */\n\t\treturn (\n\t\t\t<div ref={ this.bindContainer }\n\t\t\t\t{ ...omit( props, [\n\t\t\t\t\t'stopNavigationEvents',\n\t\t\t\t\t'eventToOffset',\n\t\t\t\t\t'onNavigate',\n\t\t\t\t\t'cycle',\n\t\t\t\t\t'onlyBrowserTabstops',\n\t\t\t\t] ) }\n\t\t\t\tonKeyDown={ this.onKeyDown }\n\t\t\t\tonFocus={ this.onFocus }>\n\t\t\t\t{ children }\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport class NavigableMenu extends Component {\n\trender() {\n\t\tconst { role = 'menu', orientation = 'vertical', ...rest } = this.props;\n\n\t\tconst eventToOffset = ( evt ) => {\n\t\t\tconst { keyCode } = evt;\n\n\t\t\tlet next = [ DOWN ];\n\t\t\tlet previous = [ UP ];\n\n\t\t\tif ( orientation === 'horizontal' ) {\n\t\t\t\tnext = [ RIGHT ];\n\t\t\t\tprevious = [ LEFT ];\n\t\t\t}\n\n\t\t\tif ( orientation === 'both' ) {\n\t\t\t\tnext = [ RIGHT, DOWN ];\n\t\t\t\tprevious = [ LEFT, UP ];\n\t\t\t}\n\n\t\t\tif ( includes( next, keyCode ) ) {\n\t\t\t\treturn 1;\n\t\t\t} else if ( includes( previous, keyCode ) ) {\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t};\n\n\t\treturn (\n\t\t\t<NavigableContainer\n\t\t\t\tstopNavigationEvents\n\t\t\t\tonlyBrowserTabstops={ false }\n\t\t\t\trole={ role }\n\t\t\t\taria-orientation={ orientation }\n\t\t\t\teventToOffset={ eventToOffset }\n\t\t\t\t{ ...rest }\n\t\t\t/>\n\t\t);\n\t}\n}\n\nexport class TabbableContainer extends Component {\n\trender() {\n\t\tconst eventToOffset = ( evt ) => {\n\t\t\tconst { keyCode, shiftKey } = evt;\n\t\t\tif ( TAB === keyCode ) {\n\t\t\t\treturn shiftKey ? -1 : 1;\n\t\t\t}\n\n\t\t\t// Allow custom handling of keys besides Tab.\n\t\t\t//\n\t\t\t// By default, TabbableContainer will move focus forward on Tab and\n\t\t\t// backward on Shift+Tab. The handler below will be used for all other\n\t\t\t// events. The semantics for `this.props.eventToOffset`'s return\n\t\t\t// values are the following:\n\t\t\t//\n\t\t\t// - +1: move focus forward\n\t\t\t// - -1: move focus backward\n\t\t\t// -  0: don't move focus, but acknowledge event and thus stop it\n\t\t\t// - undefined: do nothing, let the event propagate\n\t\t\tif ( this.props.eventToOffset ) {\n\t\t\t\treturn this.props.eventToOffset( evt );\n\t\t\t}\n\t\t};\n\n\t\treturn (\n\t\t\t<NavigableContainer\n\t\t\t\tstopNavigationEvents\n\t\t\t\tonlyBrowserTabstops\n\t\t\t\teventToOffset={ eventToOffset }\n\t\t\t\t{ ...this.props }\n\t\t\t/>\n\t\t);\n\t}\n}\n"]}