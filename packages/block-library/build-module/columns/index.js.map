{"version":3,"sources":["/Users/ky/Sites/valet/copesacontent/web/app/plugins/gutenberg/packages/block-library/src/columns/index.js"],"names":["times","classnames","memoize","__","PanelBody","RangeControl","G","SVG","Path","Fragment","createBlock","InspectorControls","InnerBlocks","ALLOWED_BLOCKS","getColumnsTemplate","columns","getDeprecatedLayoutColumn","originalContent","doc","document","implementation","createHTMLDocument","columnMatch","body","innerHTML","firstChild","classList","classListItem","match","Number","name","settings","title","icon","category","attributes","type","default","description","supports","align","deprecated","isEligible","innerBlocks","isFastPassEligible","some","innerBlock","test","undefined","migrate","reduce","result","columnIndex","push","migratedInnerBlocks","map","columnBlocks","save","edit","setAttributes","className","classes","nextColumns"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { times } from 'lodash';\nimport classnames from 'classnames';\nimport memoize from 'memize';\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { PanelBody, RangeControl, G, SVG, Path } from '@wordpress/components';\nimport { Fragment } from '@wordpress/element';\nimport { createBlock } from '@wordpress/blocks';\nimport {\n\tInspectorControls,\n\tInnerBlocks,\n} from '@wordpress/editor';\n\n/**\n * Allowed blocks constant is passed to InnerBlocks precisely as specified here.\n * The contents of the array should never change.\n * The array should contain the name of each block that is allowed.\n * In columns block, the only block we allow is 'core/column'.\n *\n * @constant\n * @type {string[]}\n*/\nconst ALLOWED_BLOCKS = [ 'core/column' ];\n\n/**\n * Returns the layouts configuration for a given number of columns.\n *\n * @param {number} columns Number of columns.\n *\n * @return {Object[]} Columns layout configuration.\n */\nconst getColumnsTemplate = memoize( ( columns ) => {\n\treturn times( columns, () => [ 'core/column' ] );\n} );\n\n/**\n * Given an HTML string for a deprecated columns inner block, returns the\n * column index to which the migrated inner block should be assigned. Returns\n * undefined if the inner block was not assigned to a column.\n *\n * @param {string} originalContent Deprecated Columns inner block HTML.\n *\n * @return {?number} Column to which inner block is to be assigned.\n */\nfunction getDeprecatedLayoutColumn( originalContent ) {\n\tlet { doc } = getDeprecatedLayoutColumn;\n\tif ( ! doc ) {\n\t\tdoc = document.implementation.createHTMLDocument( '' );\n\t\tgetDeprecatedLayoutColumn.doc = doc;\n\t}\n\n\tlet columnMatch;\n\n\tdoc.body.innerHTML = originalContent;\n\tfor ( const classListItem of doc.body.firstChild.classList ) {\n\t\tif ( ( columnMatch = classListItem.match( /^layout-column-(\\d+)$/ ) ) ) {\n\t\t\treturn Number( columnMatch[ 1 ] ) - 1;\n\t\t}\n\t}\n}\n\nexport const name = 'core/columns';\n\nexport const settings = {\n\ttitle: __( 'Columns' ),\n\n\ticon: <SVG viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><Path fill=\"none\" d=\"M0 0h24v24H0V0z\" /><G><Path d=\"M21 4H3L2 5v14l1 1h18l1-1V5l-1-1zM8 18H4V6h4v12zm6 0h-4V6h4v12zm6 0h-4V6h4v12z\" /></G></SVG>,\n\n\tcategory: 'layout',\n\n\tattributes: {\n\t\tcolumns: {\n\t\t\ttype: 'number',\n\t\t\tdefault: 2,\n\t\t},\n\t},\n\n\tdescription: __( 'Add a block that displays content in multiple columns, then add whatever content blocks youâ€™d like.' ),\n\n\tsupports: {\n\t\talign: [ 'wide', 'full' ],\n\t},\n\n\tdeprecated: [\n\t\t{\n\t\t\tattributes: {\n\t\t\t\tcolumns: {\n\t\t\t\t\ttype: 'number',\n\t\t\t\t\tdefault: 2,\n\t\t\t\t},\n\t\t\t},\n\t\t\tisEligible( attributes, innerBlocks ) {\n\t\t\t\t// Since isEligible is called on every valid instance of the\n\t\t\t\t// Columns block and a deprecation is the unlikely case due to\n\t\t\t\t// its subsequent migration, optimize for the `false` condition\n\t\t\t\t// by performing a naive, inaccurate pass at inner blocks.\n\t\t\t\tconst isFastPassEligible = innerBlocks.some( ( innerBlock ) => (\n\t\t\t\t\t/layout-column-\\d+/.test( innerBlock.originalContent )\n\t\t\t\t) );\n\n\t\t\t\tif ( ! isFastPassEligible ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\t// Only if the fast pass is considered eligible is the more\n\t\t\t\t// accurate, durable, slower condition performed.\n\t\t\t\treturn innerBlocks.some( ( innerBlock ) => (\n\t\t\t\t\tgetDeprecatedLayoutColumn( innerBlock.originalContent ) !== undefined\n\t\t\t\t) );\n\t\t\t},\n\t\t\tmigrate( attributes, innerBlocks ) {\n\t\t\t\tconst columns = innerBlocks.reduce( ( result, innerBlock ) => {\n\t\t\t\t\tconst { originalContent } = innerBlock;\n\n\t\t\t\t\tlet columnIndex = getDeprecatedLayoutColumn( originalContent );\n\t\t\t\t\tif ( columnIndex === undefined ) {\n\t\t\t\t\t\tcolumnIndex = 0;\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( ! result[ columnIndex ] ) {\n\t\t\t\t\t\tresult[ columnIndex ] = [];\n\t\t\t\t\t}\n\n\t\t\t\t\tresult[ columnIndex ].push( innerBlock );\n\n\t\t\t\t\treturn result;\n\t\t\t\t}, [] );\n\n\t\t\t\tconst migratedInnerBlocks = columns.map( ( columnBlocks ) => (\n\t\t\t\t\tcreateBlock( 'core/column', {}, columnBlocks )\n\t\t\t\t) );\n\n\t\t\t\treturn [\n\t\t\t\t\tattributes,\n\t\t\t\t\tmigratedInnerBlocks,\n\t\t\t\t];\n\t\t\t},\n\t\t\tsave( { attributes } ) {\n\t\t\t\tconst { columns } = attributes;\n\n\t\t\t\treturn (\n\t\t\t\t\t<div className={ `has-${ columns }-columns` }>\n\t\t\t\t\t\t<InnerBlocks.Content />\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t},\n\t\t},\n\t],\n\n\tedit( { attributes, setAttributes, className } ) {\n\t\tconst { columns } = attributes;\n\t\tconst classes = classnames( className, `has-${ columns }-columns` );\n\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t<InspectorControls>\n\t\t\t\t\t<PanelBody>\n\t\t\t\t\t\t<RangeControl\n\t\t\t\t\t\t\tlabel={ __( 'Columns' ) }\n\t\t\t\t\t\t\tvalue={ columns }\n\t\t\t\t\t\t\tonChange={ ( nextColumns ) => {\n\t\t\t\t\t\t\t\tsetAttributes( {\n\t\t\t\t\t\t\t\t\tcolumns: nextColumns,\n\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\tmin={ 2 }\n\t\t\t\t\t\t\tmax={ 6 }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</PanelBody>\n\t\t\t\t</InspectorControls>\n\t\t\t\t<div className={ classes }>\n\t\t\t\t\t<InnerBlocks\n\t\t\t\t\t\ttemplate={ getColumnsTemplate( columns ) }\n\t\t\t\t\t\ttemplateLock=\"all\"\n\t\t\t\t\t\tallowedBlocks={ ALLOWED_BLOCKS } />\n\t\t\t\t</div>\n\t\t\t</Fragment>\n\t\t);\n\t},\n\n\tsave( { attributes } ) {\n\t\tconst { columns } = attributes;\n\n\t\treturn (\n\t\t\t<div className={ `has-${ columns }-columns` }>\n\t\t\t\t<InnerBlocks.Content />\n\t\t\t</div>\n\t\t);\n\t},\n};\n"]}