{"version":3,"sources":["/Users/ky/Sites/valet/copesacontent/web/app/plugins/gutenberg/packages/editor/src/components/block-actions/index.js"],"names":["castArray","first","last","every","compose","withSelect","withDispatch","cloneBlock","hasBlockSupport","BlockActions","onDuplicate","onRemove","onInsertBefore","onInsertAfter","isLocked","canDuplicate","children","select","props","getBlocksByClientId","getBlockIndex","getTemplateLock","getBlockRootClientId","blocks","clientIds","block","name","rootClientId","firstSelectedIndex","lastSelectedIndex","extraProps","dispatch","insertBlocks","multiSelect","removeBlocks","insertDefaultBlock","clonedBlocks","map","length","clientId"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { castArray, first, last, every } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { compose } from '@wordpress/compose';\nimport { withSelect, withDispatch } from '@wordpress/data';\nimport { cloneBlock, hasBlockSupport } from '@wordpress/blocks';\n\nfunction BlockActions( {\n\tonDuplicate,\n\tonRemove,\n\tonInsertBefore,\n\tonInsertAfter,\n\tisLocked,\n\tcanDuplicate,\n\tchildren,\n} ) {\n\treturn children( {\n\t\tonDuplicate,\n\t\tonRemove,\n\t\tonInsertAfter,\n\t\tonInsertBefore,\n\t\tisLocked,\n\t\tcanDuplicate,\n\t} );\n}\n\nexport default compose( [\n\twithSelect( ( select, props ) => {\n\t\tconst {\n\t\t\tgetBlocksByClientId,\n\t\t\tgetBlockIndex,\n\t\t\tgetTemplateLock,\n\t\t\tgetBlockRootClientId,\n\t\t} = select( 'core/editor' );\n\n\t\tconst blocks = getBlocksByClientId( props.clientIds );\n\t\tconst canDuplicate = every( blocks, ( block ) => {\n\t\t\treturn !! block && hasBlockSupport( block.name, 'multiple', true );\n\t\t} );\n\t\tconst rootClientId = getBlockRootClientId( props.clientIds[ 0 ] );\n\n\t\treturn {\n\t\t\tfirstSelectedIndex: getBlockIndex( first( castArray( props.clientIds ) ), rootClientId ),\n\t\t\tlastSelectedIndex: getBlockIndex( last( castArray( props.clientIds ) ), rootClientId ),\n\t\t\tisLocked: !! getTemplateLock( rootClientId ),\n\t\t\tblocks,\n\t\t\tcanDuplicate,\n\t\t\trootClientId,\n\t\t\textraProps: props,\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch, props ) => {\n\t\tconst {\n\t\t\tclientIds,\n\t\t\trootClientId,\n\t\t\tblocks,\n\t\t\tfirstSelectedIndex,\n\t\t\tlastSelectedIndex,\n\t\t\tisLocked,\n\t\t\tcanDuplicate,\n\t\t} = props;\n\n\t\tconst {\n\t\t\tinsertBlocks,\n\t\t\tmultiSelect,\n\t\t\tremoveBlocks,\n\t\t\tinsertDefaultBlock,\n\t\t} = dispatch( 'core/editor' );\n\n\t\treturn {\n\t\t\tonDuplicate() {\n\t\t\t\tif ( isLocked || ! canDuplicate ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst clonedBlocks = blocks.map( ( block ) => cloneBlock( block ) );\n\t\t\t\tinsertBlocks(\n\t\t\t\t\tclonedBlocks,\n\t\t\t\t\tlastSelectedIndex + 1,\n\t\t\t\t\trootClientId\n\t\t\t\t);\n\t\t\t\tif ( clonedBlocks.length > 1 ) {\n\t\t\t\t\tmultiSelect(\n\t\t\t\t\t\tfirst( clonedBlocks ).clientId,\n\t\t\t\t\t\tlast( clonedBlocks ).clientId\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t},\n\t\t\tonRemove() {\n\t\t\t\tif ( ! isLocked ) {\n\t\t\t\t\tremoveBlocks( clientIds );\n\t\t\t\t}\n\t\t\t},\n\t\t\tonInsertBefore() {\n\t\t\t\tif ( ! isLocked ) {\n\t\t\t\t\tinsertDefaultBlock( {}, rootClientId, firstSelectedIndex );\n\t\t\t\t}\n\t\t\t},\n\t\t\tonInsertAfter() {\n\t\t\t\tif ( ! isLocked ) {\n\t\t\t\t\tinsertDefaultBlock( {}, rootClientId, lastSelectedIndex + 1 );\n\t\t\t\t}\n\t\t\t},\n\t\t};\n\t} ),\n] )( BlockActions );\n"]}